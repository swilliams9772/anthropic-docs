<!DOCTYPE html>
<html class="dark" lang="en"><head><meta charset="utf-8"/><meta content="width=device-width" name="viewport"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/apple-touch-icon.png?v=3" rel="apple-touch-icon" sizes="180x180" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-32x32.png?v=3" rel="icon" sizes="32x32" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-16x16.png?v=3" rel="icon" sizes="16x16" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon.ico?v=3" rel="shortcut icon" type="image/x-icon"/><meta content="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/browserconfig.xml?v=3" name="msapplication-config"/><meta content="Anthropic" name="apple-mobile-web-app-title"/><meta content="Anthropic" name="application-name"/><meta content="#0E0E0E" name="msapplication-TileColor"/><meta content="#ffffff" name="theme-color"/><link href="/sitemap.xml" rel="sitemap" type="application/xml"/><meta content="utf-8" name="charset"/><meta content="website" name="og:type"/><meta content="Anthropic" name="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><meta content="Count Message tokens - Anthropic" name="og:title"/><meta content="Count Message tokens - Anthropic" name="twitter:title"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Count+Message+tokens&amp;description=Count+the+number+of+tokens+in+a+Message.%0A%0AThe+Token+Count+API+can+be+used+to+count+the+number+of+tokens+in+a+Message%2C+including+tools%2C+images%2C+and+documents%2C+without+creating+it.%0A%0ALearn+more+about+token+counting+in+our+%5Buser+guide%5D%28%2Fen%2Fdocs%2Fbuild-with-claude%2Ftoken-counting%29&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="og:image"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Count+Message+tokens&amp;description=Count+the+number+of+tokens+in+a+Message.%0A%0AThe+Token+Count+API+can+be+used+to+count+the+number+of+tokens+in+a+Message%2C+including+tools%2C+images%2C+and+documents%2C+without+creating+it.%0A%0ALearn+more+about+token+counting+in+our+%5Buser+guide%5D%28%2Fen%2Fdocs%2Fbuild-with-claude%2Ftoken-counting%29&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="twitter:image"/><meta content="Count the number of tokens in a Message.

The Token Count API can be used to count the number of tokens in a Message, including tools, images, and documents, without creating it.

Learn more about token counting in our [user guide](/en/docs/build-with-claude/token-counting)" name="og:description"/><meta content="Count the number of tokens in a Message.

The Token Count API can be used to count the number of tokens in a Message, including tools, images, and documents, without creating it.

Learn more about token counting in our [user guide](/en/docs/build-with-claude/token-counting)" name="description"/><title>Count Message tokens - Anthropic</title><meta content="/en/api/messages-count-tokens" name="og:url"/><link href="/en/api/messages-count-tokens" rel="canonical"/><meta content="25" name="next-head-count"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" rel="stylesheet"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" rel="preload" type="font/woff2"/><link as="style" href="/_next/static/css/dc50e134f609f53d.css" rel="preload"/><link data-n-g="" href="/_next/static/css/dc50e134f609f53d.css" rel="stylesheet"/><noscript data-n-css=""></noscript></head><div id="__next"><main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="z-30 fixed lg:sticky top-0 w-full" id="navbar"><div class="max-w-8xl mx-auto relative"><div class=""><div class="relative"><div class="flex items-center lg:px-12 h-16 min-w-0 mx-4 lg:mx-0"><div class="h-full relative flex-1 flex items-center gap-x-4 min-w-0 border-b border-gray-500/5 dark:border-gray-300/[0.06]"><div class="flex-1 flex items-center gap-x-4"><a href="/"><span class="sr-only">Anthropic<!-- --> home page</span></a><div class="flex items-center gap-x-2"><button aria-expanded="false" aria-haspopup="menu" class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;&gt;span]:line-clamp-1 overflow-hidden group outline-none group-hover:text-zinc-950/70 dark:group-hover:text-white/70 text-xs gap-1.5 text-gray-500 dark:text-gray-400 leading-5 font-semibold border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 rounded-full py-1 px-3 flex items-center space-x-2 whitespace-nowrap" data-state="closed" id="radix-:R25fcql6:" type="button">English</button></div></div><div class="hidden lg:block mx-px relative flex-1 bg-white dark:bg-gray-900 pointer-events-auto rounded-xl min-w-0"><button class="w-full flex items-center text-sm leading-6 rounded-xl py-1.5 pl-3.5 pr-3 shadow-sm text-gray-400 dark:text-white/50 bg-background-light dark:bg-background-dark dark:brightness-[1.1] dark:ring-1 dark:hover:brightness-[1.25] ring-1 ring-gray-400/20 hover:ring-gray-600/25 dark:ring-gray-600/30 dark:hover:ring-gray-500/30 focus:outline-primary justify-between truncate gap-2 min-w-[43px]" id="search-bar-entry" type="button"><div class="flex items-center gap-3 min-w-[42px]"><div class="truncate min-w-0">Search...</div></div></button></div><div class="flex lg:hidden items-center gap-2"><button class="text-gray-500 w-8 h-8 flex items-center justify-center hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" id="search-bar-entry-mobile" type="button"><span class="sr-only">Search...</span></button></div></div></div><div class="flex items-center h-14 py-4 px-5 lg:hidden"><button class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" type="button"><span class="sr-only">Navigation</span></button><div class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0 space-x-3"><div class="flex items-center space-x-3"><span>Messages</span></div><div class="font-semibold text-gray-900 truncate dark:text-gray-200">Count Message tokens</div></div></div></div><div class="hidden lg:flex px-12 h-12"><div class="h-full flex text-sm space-x-6"><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/home">Welcome</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/docs/welcome">User Guides</a><a class="group relative h-full flex items-center text-gray-800 dark:text-gray-200 font-semibold" href="/en/api/getting-started">API Reference</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/prompt-library/library">Prompt Library</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/release-notes/overview">Release Notes</a></div></div></div></div></div><div class="max-w-8xl px-4 mx-auto lg:px-8 min-h-screen"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem] top-[7.1rem]" id="sidebar"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Using the API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-started"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-started" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting started</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/ip-addresses"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/ip-addresses" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>IP addresses</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/versioning"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/versioning" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Versions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/errors"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/errors" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Errors</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/rate-limits"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/rate-limits" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Rate limits</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/client-sdks"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/client-sdks" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Client SDKs</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/supported-regions"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/supported-regions" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Supported regions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-help"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-help" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting help</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Anthropic APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Messages</div></div><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Messages</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-count-tokens"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/api/messages-count-tokens" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-[#3064E3] text-white">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Count Message tokens</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-streaming"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-streaming" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Streaming Messages</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/migrating-from-text-completions-to-messages"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/migrating-from-text-completions-to-messages" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Migrating from Text Completions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-examples" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Messages examples</div></div></a></li></ul></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Models</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Message Batches</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Text Completions (Legacy)</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Admin API</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">OpenAI SDK compatibility</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/openai-sdk"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/openai-sdk" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>OpenAI SDK compatibility (beta)</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Experimental APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Prompt tools</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Amazon Bedrock API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-amazon-bedrock"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-amazon-bedrock" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Amazon Bedrock API</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Vertex AI</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-vertex-ai"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-vertex-ai" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vertex AI API</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="flex flex-col gap-8"><div class="mt-6 flex w-full flex-col space-y-4"><div class="flex w-full flex-col bg-background-light dark:bg-background-dark border-standard rounded-2xl p-1"><div class="flex items-center space-x-1.5"><div class="relative flex-1 flex gap-2 min-w-0 rounded-xl items-center cursor-pointer p-1.5"><div class="rounded-lg font-bold px-1.5 py-0.5 text-sm leading-5 bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</div><div class="flex items-center space-x-2 overflow-x-auto flex-1 no-scrollbar"><div class="group flex items-center flex-1 gap-0.5 font-mono"><div class="text-sm text-gray-400">/</div><div class="text-sm font-medium text-gray-800 dark:text-white min-w-max">v1</div><div class="text-sm text-gray-400">/</div><div class="text-sm font-medium text-gray-800 dark:text-white min-w-max">messages</div><div class="text-sm text-gray-400">/</div><div class="text-sm font-medium text-gray-800 dark:text-white min-w-max">count_tokens</div></div></div></div></div></div></div></div><div class="relative mt-8 prose prose-gray dark:prose-invert"><div><div class="flex items-baseline border-b pb-2.5 border-gray-100 dark:border-gray-800"><h4 class="flex-1 mb-0">Headers</h4></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="parameter-anthropic-beta"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#parameter-anthropic-beta">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">anthropic-beta</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string[]</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Optional header to specify the beta version(s) you want to use.</p>
<p class="whitespace-pre-line">To use multiple betas, use a comma separated list like <code>beta1,beta2</code> or specify the header multiple times for each beta.</p></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="parameter-anthropic-version"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#parameter-anthropic-version">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">anthropic-version</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">The version of the Anthropic API you want to use.</p>
<p class="whitespace-pre-line">Read more about versioning and our version history <a href="https://docs.anthropic.com/en/api/versioning">here</a>.</p></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="parameter-x-api-key"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#parameter-x-api-key">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">x-api-key</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Your unique API key for authentication.</p>
<p class="whitespace-pre-line">This key is required in the header of all API requests, to authenticate your account and access Anthropic's services. Get your API key through the <a href="https://console.anthropic.com/settings/keys">Console</a>. Each key is scoped to a Workspace.</p></div></div></div></div><div><div class="flex items-baseline border-b pb-2.5 border-gray-100 dark:border-gray-800"><h4 class="flex-1 mb-0">Body</h4><div class="flex items-center"><div class="font-mono px-2 py-0.5 text-xs font-medium text-gray-600 dark:text-gray-300">application/json</div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-messages"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-messages">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">messages</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object[]</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Input messages.</p>
<p class="whitespace-pre-line">Our models are trained to operate on alternating <code>user</code> and <code>assistant</code> conversational turns. When creating a new <code>Message</code>, you specify the prior conversational turns with the <code>messages</code> parameter, and the model then generates the next <code>Message</code> in the conversation. Consecutive <code>user</code> or <code>assistant</code> turns in your request will be combined into a single turn.</p>
<p class="whitespace-pre-line">Each input message must be an object with a <code>role</code> and <code>content</code>. You can specify a single <code>user</code>-role message, or you can include multiple <code>user</code> and <code>assistant</code> messages.</p>
<p class="whitespace-pre-line">If the final message uses the <code>assistant</code> role, the response content will continue immediately from the content in that message. This can be used to constrain part of the model's response.</p>
<p class="whitespace-pre-line">Example with a single <code>user</code> message:</p>
<pre><code class="language-json">[{"role": "user", "content": "Hello, Claude"}]
</code></pre>
<p class="whitespace-pre-line">Example with multiple conversational turns:</p>
<pre><code class="language-json">[
  {"role": "user", "content": "Hello there."},
  {"role": "assistant", "content": "Hi, I'm Claude. How can I help you?"},
  {"role": "user", "content": "Can you explain LLMs in plain English?"},
]
</code></pre>
<p class="whitespace-pre-line">Example with a partially-filled response from Claude:</p>
<pre><code class="language-json">[
  {"role": "user", "content": "What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun"},
  {"role": "assistant", "content": "The best answer is ("},
]
</code></pre>
<p class="whitespace-pre-line">Each input message <code>content</code> may be either a single <code>string</code> or an array of content blocks, where each block has a specific <code>type</code>. Using a <code>string</code> for <code>content</code> is shorthand for an array of one content block of type <code>"text"</code>. The following input messages are equivalent:</p>
<pre><code class="language-json">{"role": "user", "content": "Hello, Claude"}
</code></pre>
<pre><code class="language-json">{"role": "user", "content": [{"type": "text", "text": "Hello, Claude"}]}
</code></pre>
<p class="whitespace-pre-line">Starting with Claude 3 models, you can also send image content blocks:</p>
<pre><code class="language-json">{"role": "user", "content": [
  {
    "type": "image",
    "source": {
      "type": "base64",
      "media_type": "image/jpeg",
      "data": "/9j/4AAQSkZJRg...",
    }
  },
  {"type": "text", "text": "What is in this image?"}
]}
</code></pre>
<p class="whitespace-pre-line">We currently support the <code>base64</code> source type for images, and the <code>image/jpeg</code>, <code>image/png</code>, <code>image/gif</code>, and <code>image/webp</code> media types.</p>
<p class="whitespace-pre-line">See <a href="https://docs.anthropic.com/en/api/messages-examples#vision">examples</a> for more input examples.</p>
<p class="whitespace-pre-line">Note that if you want to include a <a href="https://docs.anthropic.com/en/docs/system-prompts">system prompt</a>, you can use the top-level <code>system</code> parameter — there is no <code>"system"</code> role for input messages in the Messages API.</p>
<p class="whitespace-pre-line">There is a limit of 100000 messages in a single request.</p></div><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-messages-content"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-messages-content">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">messages.</span>content</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="px-2 py-0.5 font-mono text-xs font-medium flex items-center rounded-md space-x-1.5 bg-gray-100/70 dark:bg-white/10 text-gray-600 dark:text-gray-200"><select class="bg-transparent focus:outline-0 cursor-pointer"><option selected="" value="0">string</option><option value="1">object[]</option></select></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-messages-role"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-messages-role">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">messages.</span>role</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt;</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>user</code>,<!-- --> </div><div class="inline-block"><code>assistant</code> </div></div></div></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-model"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-model">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">model</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">The model that will complete your prompt.</p>
<p class="whitespace-pre-line">See <a href="https://docs.anthropic.com/en/docs/models-overview">models</a> for additional details and options.</p></div><div class="prose prose-sm prose-gray dark:prose-invert mt-6">Required string length: <code>1 - 256</code></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-system"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-system">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">system</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="px-2 py-0.5 font-mono text-xs font-medium flex items-center rounded-md space-x-1.5 bg-gray-100/70 dark:bg-white/10 text-gray-600 dark:text-gray-200"><select class="bg-transparent focus:outline-0 cursor-pointer"><option selected="" value="0">string</option><option value="1">object[]</option></select></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">System prompt.</p>
<p class="whitespace-pre-line">A system prompt is a way of providing context and instructions to Claude, such as specifying a particular goal or role. See our <a href="https://docs.anthropic.com/en/docs/system-prompts">guide to system prompts</a>.</p></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-thinking"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-thinking">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">thinking</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Configuration for enabling Claude's extended thinking.</p>
<p class="whitespace-pre-line">When enabled, responses include <code>thinking</code> content blocks showing Claude's thinking process before the final answer. Requires a minimum budget of 1,024 tokens and counts towards your <code>max_tokens</code> limit.</p>
<p class="whitespace-pre-line">See <a href="https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking">extended thinking</a> for details.</p></div><div class="mt-4 rounded-xl border border-gray-100 px-4 pb-4 pt-2 dark:border-white/10"><div class="-mt-2"><ul class="not-prose mb-6 pb-[1px] flex-none min-w-full overflow-auto border-b border-gray-200 space-x-6 flex dark:border-gray-200/10 !border-gray-100 !mb-4 dark:!border-white/10"><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-primary dark:text-primary-light border-current">Enabled</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">Disabled</button></li></ul></div><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-thinking-budget-tokens"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-thinking-budget-tokens">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">thinking.</span>budget_tokens</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>integer</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Determines how many tokens Claude can use for its internal reasoning process. Larger budgets can enable more thorough analysis for complex problems, improving response quality.</p>
<p class="whitespace-pre-line">Must be ≥1024 and less than <code>max_tokens</code>.</p>
<p class="whitespace-pre-line">See <a href="https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking">extended thinking</a> for details.</p></div><div class="prose prose-sm prose-gray dark:prose-invert mt-6">Required range: <code>x &gt; 1024</code></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-thinking-type"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-thinking-type">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">thinking.</span>type</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt;</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>enabled</code> </div></div></div></div></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tool-choice"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tool-choice">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">tool_choice</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">How the model should use the provided tools. The model can use a specific tool, any available tool, decide by itself, or not use tools at all.</p></div><div class="mt-4 rounded-xl border border-gray-100 px-4 pb-4 pt-2 dark:border-white/10"><div class="-mt-2"><ul class="not-prose mb-6 pb-[1px] flex-none min-w-full overflow-auto border-b border-gray-200 space-x-6 flex dark:border-gray-200/10 !border-gray-100 !mb-4 dark:!border-white/10"><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-primary dark:text-primary-light border-current">Auto</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">Any</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">Tool</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">ToolChoiceNone</button></li></ul></div><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tool-choice-type"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tool-choice-type">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tool_choice.</span>type</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt;</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>auto</code> </div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tool-choice-disable-parallel-tool-use"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tool-choice-disable-parallel-tool-use">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tool_choice.</span>disable_parallel_tool_use</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>boolean</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Whether to disable parallel tool use.</p>
<p class="whitespace-pre-line">Defaults to <code>false</code>. If set to <code>true</code>, the model will output at most one tool use.</p></div></div></div></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">tools</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object[]</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Definitions of tools that the model may use.</p>
<p class="whitespace-pre-line">If you include <code>tools</code> in your API request, the model may return <code>tool_use</code> content blocks that represent the model's use of those tools. You can then run those tools using the tool input generated by the model and then optionally return results back to the model using <code>tool_result</code> content blocks.</p>
<p class="whitespace-pre-line">Each tool definition includes:</p>
<ul>
<li><code>name</code>: Name of the tool.</li>
<li><code>description</code>: Optional, but strongly-recommended description of the tool.</li>
<li><code>input_schema</code>: <a href="https://json-schema.org/draft/2020-12">JSON schema</a> for the tool <code>input</code> shape that the model will produce in <code>tool_use</code> output content blocks.</li>
</ul>
<p class="whitespace-pre-line">For example, if you defined <code>tools</code> as:</p>
<pre><code class="language-json">[
  {
    "name": "get_stock_price",
    "description": "Get the current stock price for a given ticker symbol.",
    "input_schema": {
      "type": "object",
      "properties": {
        "ticker": {
          "type": "string",
          "description": "The stock ticker symbol, e.g. AAPL for Apple Inc."
        }
      },
      "required": ["ticker"]
    }
  }
]
</code></pre>
<p class="whitespace-pre-line">And then asked the model "What's the S&amp;P 500 at today?", the model might produce <code>tool_use</code> content blocks in the response like this:</p>
<pre><code class="language-json">[
  {
    "type": "tool_use",
    "id": "toolu_01D7FLrfh4GYq7yT1ULFeyMV",
    "name": "get_stock_price",
    "input": { "ticker": "^GSPC" }
  }
]
</code></pre>
<p class="whitespace-pre-line">You might then run your <code>get_stock_price</code> tool with <code>{"ticker": "^GSPC"}</code> as an input, and return the following back to the model in a subsequent <code>user</code> message:</p>
<pre><code class="language-json">[
  {
    "type": "tool_result",
    "tool_use_id": "toolu_01D7FLrfh4GYq7yT1ULFeyMV",
    "content": "259.75 USD"
  }
]
</code></pre>
<p class="whitespace-pre-line">Tools can be used for workflows that include running client-side tools and functions, or more generally whenever you want the model to produce a particular JSON structure of output.</p>
<p class="whitespace-pre-line">See our <a href="https://docs.anthropic.com/en/docs/tool-use">guide</a> for more details.</p></div><div class="mt-4 rounded-xl border border-gray-100 px-4 pb-4 pt-2 dark:border-white/10"><div class="-mt-2"><ul class="not-prose mb-6 pb-[1px] flex-none min-w-full overflow-auto border-b border-gray-200 space-x-6 flex dark:border-gray-200/10 !border-gray-100 !mb-4 dark:!border-white/10"><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-primary dark:text-primary-light border-current">Custom Tool</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">ComputerUseTool_20241022</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">BashTool_20241022</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">TextEditor_20241022</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">ComputerUseTool_20250124</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">BashTool_20250124</button></li><li class="cursor-pointer"><button class="flex text-sm leading-6 font-semibold whitespace-nowrap pt-3 pb-2.5 -mb-px max-w-max border-b text-gray-900 border-transparent hover:border-gray-300 dark:text-gray-200 dark:hover:border-gray-700">TextEditor_20250124</button></li></ul></div><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-input-schema"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-input-schema">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.</span>input_schema</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line"><a href="https://json-schema.org/draft/2020-12">JSON schema</a> for this tool's input.</p>
<p class="whitespace-pre-line">This defines the shape of the <code>input</code> that your tool accepts and that the model will produce.</p></div><div class=""><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-input-schema-type"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-input-schema-type">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.input_schema.</span>type</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt;</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>object</code> </div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-input-schema-properties"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-input-schema-properties">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.input_schema.</span>properties</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object | null</div></div></div></div></div></div></div></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-name"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-name">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.</span>name</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Name of the tool.</p>
<p class="whitespace-pre-line">This is how the tool will be called by the model and in tool_use blocks.</p></div><div class="prose prose-sm prose-gray dark:prose-invert mt-6">Required string length: <code>1 - 64</code></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-cache-control"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-cache-control">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.</span>cache_control</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>object | null</div></div></div></div></div></div><div class="mt-4"><div class=""><div class="mt-4 border-standard rounded-xl" role="listitem"><button aria-controls="Children attributes" aria-expanded="false" class="not-prose text-sm flex flex-row items-center content-center w-full text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-200 py-3 px-3.5 hover:bg-gray-50/50 dark:hover:bg-white/5 rounded-t-xl rounded-b-xl"><div class="ml-3 leading-tight text-left"><p class="m-0">Show<!-- --> <!-- -->child attributes</p></div></button><div class="expandable-content mx-3 px-2 border-t border-gray-100 dark:border-white/10 hidden" id="undefinedChildren"><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-cache-control-type"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-cache-control-type">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.cache_control.</span>type</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt;</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>ephemeral</code> </div></div></div></div></div></div></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-description"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-description">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.</span>description</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>string</div></div></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">Description of what this tool does.</p>
<p class="whitespace-pre-line">Tool descriptions should be as detailed as possible. The more information that the model has about what the tool is and how to use it, the better it will perform. You can use natural language descriptions to reinforce important aspects of the tool input JSON schema.</p></div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="body-tools-type"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-[2.1rem] flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#body-tools-type">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer"><span class="text-gray-500 dark:text-gray-400">tools.</span>type</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>enum&lt;string&gt; | null</div></div></div></div></div></div><div class="mt-4"><div class="whitespace-pre-wrap prose-sm mt-6">Available options:<!-- --> <div class="inline-block"><code>custom</code> </div></div></div></div></div></div></div></div></div></div><div><div class="flex items-baseline border-b pb-2.5 border-gray-100 dark:border-gray-800"><h4 class="flex-1 mb-0">Response</h4><div class="flex items-center"><div class="font-mono px-2 py-0.5 text-xs font-medium text-gray-600 dark:text-gray-300">200 - application/json</div></div></div><div class="py-6 border-gray-100 dark:border-gray-800 border-b last:border-b-0"><div class="flex font-mono text-sm group/param-head param-head" id="response-input-tokens"><div class="flex-1 flex content-start py-0.5 mr-5"><div class="flex items-center flex-wrap gap-2"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover/param-head:opacity-100 py-2 [.expandable-content_&amp;]:-ml-[2.1rem]" href="#response-input-tokens">​</a></div><div class="font-semibold text-primary dark:text-primary-light cursor-pointer">input_tokens</div><div class="flex items-center space-x-2 text-xs font-medium"><div class="flex items-center px-2 py-0.5 rounded-md bg-gray-100/50 dark:bg-white/5 text-gray-600 dark:text-gray-200 font-medium"><div>integer</div></div><span class="px-2 py-0.5 rounded-md bg-red-100/50 dark:bg-red-400/10 text-red-600 dark:text-red-300 font-medium">required</span></div></div></div></div><div class="mt-4"><div class="prose prose-sm prose-gray dark:prose-invert"><p class="whitespace-pre-line">The total number of tokens across the provided list of messages, system prompt, and tools.</p></div></div></div></div></div><div class="leading-6 mt-14"><div class="pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200"><a class="flex items-center space-x-3 group" href="/en/api/messages"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Messages</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/api/messages-streaming"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Streaming Messages</span></a></div></div></div></div></div></div></div></main></div></html>