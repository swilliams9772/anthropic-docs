<!DOCTYPE html>
<html class="dark" lang="en"><head><meta charset="utf-8"/><meta content="width=device-width" name="viewport"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/apple-touch-icon.png?v=3" rel="apple-touch-icon" sizes="180x180" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-32x32.png?v=3" rel="icon" sizes="32x32" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-16x16.png?v=3" rel="icon" sizes="16x16" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon.ico?v=3" rel="shortcut icon" type="image/x-icon"/><meta content="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/browserconfig.xml?v=3" name="msapplication-config"/><meta content="Anthropic" name="apple-mobile-web-app-title"/><meta content="Anthropic" name="application-name"/><meta content="#0E0E0E" name="msapplication-TileColor"/><meta content="#ffffff" name="theme-color"/><link href="/sitemap.xml" rel="sitemap" type="application/xml"/><meta content="utf-8" name="charset"/><meta content="website" name="og:type"/><meta content="Anthropic" name="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><meta content="Claude Code troubleshooting - Anthropic" name="og:title"/><meta content="Claude Code troubleshooting - Anthropic" name="twitter:title"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Claude+Code+troubleshooting&amp;description=Solutions+for+common+issues+with+Claude+Code+installation+and+usage.&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="og:image"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Claude+Code+troubleshooting&amp;description=Solutions+for+common+issues+with+Claude+Code+installation+and+usage.&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="twitter:image"/><meta content="Solutions for common issues with Claude Code installation and usage." name="og:description"/><meta content="Solutions for common issues with Claude Code installation and usage." name="description"/><title>Claude Code troubleshooting - Anthropic</title><meta content="/en/docs/agents-and-tools/claude-code/troubleshooting" name="og:url"/><link href="/en/docs/agents-and-tools/claude-code/troubleshooting" rel="canonical"/><meta content="25" name="next-head-count"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" rel="stylesheet"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" rel="preload" type="font/woff2"/><link as="style" href="/_next/static/css/dc50e134f609f53d.css" rel="preload"/><link data-n-g="" href="/_next/static/css/dc50e134f609f53d.css" rel="stylesheet"/><noscript data-n-css=""></noscript></head><div id="__next"><main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="z-30 fixed lg:sticky top-0 w-full" id="navbar"><div class="max-w-8xl mx-auto relative"><div class=""><div class="relative"><div class="flex items-center lg:px-12 h-16 min-w-0 mx-4 lg:mx-0"><div class="h-full relative flex-1 flex items-center gap-x-4 min-w-0 border-b border-gray-500/5 dark:border-gray-300/[0.06]"><div class="flex-1 flex items-center gap-x-4"><a href="/"><span class="sr-only">Anthropic<!-- --> home page</span></a><div class="flex items-center gap-x-2"><button aria-expanded="false" aria-haspopup="menu" class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;&gt;span]:line-clamp-1 overflow-hidden group outline-none group-hover:text-zinc-950/70 dark:group-hover:text-white/70 text-xs gap-1.5 text-gray-500 dark:text-gray-400 leading-5 font-semibold border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 rounded-full py-1 px-3 flex items-center space-x-2 whitespace-nowrap" data-state="closed" id="radix-:R25fcql6:" type="button">English</button></div></div><div class="hidden lg:block mx-px relative flex-1 bg-white dark:bg-gray-900 pointer-events-auto rounded-xl min-w-0"><button class="w-full flex items-center text-sm leading-6 rounded-xl py-1.5 pl-3.5 pr-3 shadow-sm text-gray-400 dark:text-white/50 bg-background-light dark:bg-background-dark dark:brightness-[1.1] dark:ring-1 dark:hover:brightness-[1.25] ring-1 ring-gray-400/20 hover:ring-gray-600/25 dark:ring-gray-600/30 dark:hover:ring-gray-500/30 focus:outline-primary justify-between truncate gap-2 min-w-[43px]" id="search-bar-entry" type="button"><div class="flex items-center gap-3 min-w-[42px]"><div class="truncate min-w-0">Search...</div></div></button></div><div class="flex lg:hidden items-center gap-2"><button class="text-gray-500 w-8 h-8 flex items-center justify-center hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" id="search-bar-entry-mobile" type="button"><span class="sr-only">Search...</span></button></div></div></div><div class="flex items-center h-14 py-4 px-5 lg:hidden"><button class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" type="button"><span class="sr-only">Navigation</span></button><div class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0 space-x-3"><div class="flex items-center space-x-3"><span>Claude Code</span></div><div class="font-semibold text-gray-900 truncate dark:text-gray-200">Claude Code troubleshooting</div></div></div></div><div class="hidden lg:flex px-12 h-12"><div class="h-full flex text-sm space-x-6"><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/home">Welcome</a><a class="group relative h-full flex items-center text-gray-800 dark:text-gray-200 font-semibold" href="/en/docs/welcome">User Guides</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/api/getting-started">API Reference</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/prompt-library/library">Prompt Library</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/release-notes/overview">Release Notes</a></div></div></div></div></div><div class="max-w-8xl px-4 mx-auto lg:px-8 min-h-screen"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem] top-[7.1rem]" id="sidebar"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Get started</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/welcome"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/welcome" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Overview</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/initial-setup"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/initial-setup" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Initial setup</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/intro-to-claude"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/intro-to-claude" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Intro to Claude</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Learn about Claude</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Use cases</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Models &amp; pricing</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="https://trust.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://trust.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Security and compliance</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Build with Claude</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/define-success"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/define-success" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Define success criteria</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/develop-tests"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/develop-tests" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Develop test cases</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/context-windows"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/context-windows" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Context windows</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/vision"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/vision" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vision</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Prompt engineering</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/extended-thinking"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/extended-thinking" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Extended thinking</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/multilingual-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/multilingual-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Multilingual support</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Tool use (function calling)</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/prompt-caching"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/prompt-caching" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Prompt caching</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/pdf-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/pdf-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>PDF support</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/citations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/citations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Citations</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/token-counting"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/token-counting" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Token counting</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/batch-processing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/batch-processing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Batch processing</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/embeddings"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/embeddings" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Embeddings</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Agents and tools</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Claude Code</div></div><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-code/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-code/overview" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Overview</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-code/tutorials"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-code/tutorials" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Claude Code tutorials</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-code/troubleshooting"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/docs/agents-and-tools/claude-code/troubleshooting" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Troubleshooting</div></div></a></li></ul></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/computer-use"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/computer-use" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Computer use (beta)</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/mcp"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/mcp" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model Context Protocol (MCP)</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-for-sheets"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-for-sheets" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Google Sheets add-on</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Test and evaluate</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Strengthen guardrails</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/eval-tool"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/eval-tool" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Using the Evaluation Tool</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Administration</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/administration/administration-api"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/administration/administration-api" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Admin API</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Resources</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/glossary"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/glossary" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Glossary</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/model-deprecations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/model-deprecations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model deprecations</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://status.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://status.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>System status</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://assets.anthropic.com/m/61e7d27f8c8f5919/original/Claude-3-Model-Card.pdf"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://assets.anthropic.com/m/61e7d27f8c8f5919/original/Claude-3-Model-Card.pdf" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Claude 3 model card</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://anthropic.com/claude-3-7-sonnet-system-card"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://anthropic.com/claude-3-7-sonnet-system-card" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Claude 3.7 system card</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://github.com/anthropics/anthropic-cookbook"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://github.com/anthropics/anthropic-cookbook" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Cookbook</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://github.com/anthropics/courses"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://github.com/anthropics/courses" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Courses</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/api-features"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/api-features" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>API features</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Legal center</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="https://www.anthropic.com/legal/privacy"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/legal/privacy" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Privacy Policy</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="relative mt-8 prose prose-gray dark:prose-invert"><h2 class="flex whitespace-pre-wrap group" id="common-installation-issues"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#common-installation-issues">​</a></div><span class="cursor-pointer">Common installation issues</span></h2>
<h3 class="flex whitespace-pre-wrap group" id="linux-permission-issues"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#linux-permission-issues">​</a></div><span class="cursor-pointer">Linux permission issues</span></h3>
<p>When installing Claude Code with npm, you may encounter permission errors if your npm global prefix is not user writable (eg. <code>/usr</code>, or <code>/use/local</code>).</p>
<h4 class="flex whitespace-pre-wrap group" id="recommended-solution-create-a-user-writable-npm-prefix"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#recommended-solution-create-a-user-writable-npm-prefix">​</a></div><span class="cursor-pointer">Recommended solution: Create a user-writable npm prefix</span></h4>
<p>The safest approach is to configure npm to use a directory within your home folder:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token comment"># First, save a list of your existing global packages for later migration</span></span>
<span class=""><span class="token function">npm</span> list <span class="token parameter variable">-g</span> <span class="token parameter variable">--depth</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;</span> ~/npm-global-packages.txt</span>
<!-- -->
<span class=""><span class="token comment"># Create a directory for your global packages</span></span>
<span class=""><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.npm-global</span>
<!-- -->
<span class=""><span class="token comment"># Configure npm to use the new directory path</span></span>
<span class=""><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix ~/.npm-global</span>
<!-- -->
<span class=""><span class="token comment"># Note: Replace ~/.bashrc with ~/.zshrc, ~/.profile, or other appropriate file for your shell</span></span>
<span class=""><span class="token builtin class-name">echo</span> <span class="token string">'export PATH=~/.npm-global/bin:$PATH'</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc</span>
<!-- -->
<span class=""><span class="token comment"># Apply the new PATH setting</span></span>
<span class=""><span class="token builtin class-name">source</span> ~/.bashrc</span>
<!-- -->
<span class=""><span class="token comment"># Now reinstall Claude Code in the new location</span></span>
<span class=""><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @anthropic-ai/claude-code</span>
<!-- -->
<span class=""><span class="token comment"># Optional: Reinstall your previous global packages in the new location</span></span>
<span class=""><span class="token comment"># Look at ~/npm-global-packages.txt and install packages you want to keep</span></span>
</code></pre></div></div></div>
<p>This solution is recommended because it:</p>
<ul>
<li>Avoids modifying system directory permissions</li>
<li>Creates a clean, dedicated location for your global npm packages</li>
<li>Follows security best practices</li>
</ul>
<h4 class="flex whitespace-pre-wrap group" id="system-recovery-if-you-have-run-commands-that-change-ownership-and-permissions-of-system-files-or-similar"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#system-recovery-if-you-have-run-commands-that-change-ownership-and-permissions-of-system-files-or-similar">​</a></div><span class="cursor-pointer">System Recovery: If you have run commands that change ownership and permissions of system files or similar</span></h4>
<p>If you’ve already run a command that changed system directory permissions (such as <code>sudo chown -R $USER:$(id -gn) /usr &amp;&amp; sudo chmod -R u+w /usr</code>) and your system is now broken (for example, if you see <code>sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit set</code>), you’ll need to perform recovery steps.</p>
<h5>Ubuntu/Debian Recovery Method:</h5>
<ol>
<li>
<p>While rebooting, hold <strong>SHIFT</strong> to access the GRUB menu</p>
</li>
<li>
<p>Select “Advanced options for Ubuntu/Debian”</p>
</li>
<li>
<p>Choose the recovery mode option</p>
</li>
<li>
<p>Select “Drop to root shell prompt”</p>
</li>
<li>
<p>Remount the filesystem as writable:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token function">mount</span> <span class="token parameter variable">-o</span> remount,rw /</span>
</code></pre></div></div></div>
</li>
<li>
<p>Fix permissions:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token comment"># Restore root ownership</span></span>
<span class=""><span class="token function">chown</span> <span class="token parameter variable">-R</span> root:root /usr</span>
<span class=""><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span> /usr</span>
<!-- -->
<span class=""><span class="token comment"># Ensure /usr/local is owned by your user for npm packages</span></span>
<span class=""><span class="token function">chown</span> <span class="token parameter variable">-R</span> YOUR_USERNAME:YOUR_USERNAME /usr/local</span>
<!-- -->
<span class=""><span class="token comment"># Set setuid bit for critical binaries</span></span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/sudo</span>
<span class=""><span class="token function">chmod</span> <span class="token number">4755</span> /usr/bin/sudo</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/su</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/passwd</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/newgrp</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/gpasswd</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/chsh</span>
<span class=""><span class="token function">chmod</span> u+s /usr/bin/chfn</span>
<!-- -->
<span class=""><span class="token comment"># Fix sudo configuration</span></span>
<span class=""><span class="token function">chown</span> root:root /usr/libexec/sudo/sudoers.so</span>
<span class=""><span class="token function">chmod</span> <span class="token number">4755</span> /usr/libexec/sudo/sudoers.so</span>
<span class=""><span class="token function">chown</span> root:root /etc/sudo.conf</span>
<span class=""><span class="token function">chmod</span> <span class="token number">644</span> /etc/sudo.conf</span>
</code></pre></div></div></div>
</li>
<li>
<p>Reinstall affected packages (optional but recommended):</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token comment"># Save list of installed packages</span></span>
<span class="">dpkg --get-selections <span class="token operator">&gt;</span> /tmp/installed_packages.txt</span>
<!-- -->
<span class=""><span class="token comment"># Reinstall them</span></span>
<span class=""><span class="token function">awk</span> <span class="token string">'{print $1}'</span> /tmp/installed_packages.txt <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token parameter variable">-r</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">--reinstall</span> <span class="token parameter variable">-y</span></span>
</code></pre></div></div></div>
</li>
<li>
<p>Reboot:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token function">reboot</span></span>
</code></pre></div></div></div>
</li>
</ol>
<h5>Alternative Live USB Recovery Method:</h5>
<p>If the recovery mode doesn’t work, you can use a live USB:</p>
<ol>
<li>
<p>Boot from a live USB (Ubuntu, Debian, or any Linux distribution)</p>
</li>
<li>
<p>Find your system partition:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class="">lsblk</span>
</code></pre></div></div></div>
</li>
<li>
<p>Mount your system partition:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token function">sudo</span> <span class="token function">mount</span> /dev/sdXY /mnt  <span class="token comment"># replace sdXY with your actual system partition</span></span>
</code></pre></div></div></div>
</li>
<li>
<p>If you have a separate boot partition, mount it too:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token function">sudo</span> <span class="token function">mount</span> /dev/sdXZ /mnt/boot  <span class="token comment"># if needed</span></span>
</code></pre></div></div></div>
</li>
<li>
<p>Chroot into your system:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token comment"># For Ubuntu/Debian:</span></span>
<span class=""><span class="token function">sudo</span> <span class="token function">chroot</span> /mnt</span>
<!-- -->
<span class=""><span class="token comment"># For Arch-based systems:</span></span>
<span class=""><span class="token function">sudo</span> arch-chroot /mnt</span>
</code></pre></div></div></div>
</li>
<li>
<p>Follow steps 6-8 from the Ubuntu/Debian recovery method above</p>
</li>
</ol>
<p>After restoring your system, follow the recommended solution above to set up a user-writable npm prefix.</p>
<h2 class="flex whitespace-pre-wrap group" id="auto-updater-issues"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#auto-updater-issues">​</a></div><span class="cursor-pointer">Auto-updater issues</span></h2>
<p>If Claude Code can’t update automatically, it may be due to permission issues with your npm global prefix directory. Follow the <a href="/_sites/docs.anthropic.com/en/docs/agents-and-tools/claude-code/troubleshooting#recommended-solution-create-a-user-writable-npm-prefix">recommended solution</a> above to fix this.</p>
<p>If you prefer to disable the auto-updater instead, you can use:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class="">claude config <span class="token builtin class-name">set</span> <span class="token parameter variable">-g</span> autoUpdaterStatus disabled</span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="permissions-and-authentication"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#permissions-and-authentication">​</a></div><span class="cursor-pointer">Permissions and authentication</span></h2>
<h3 class="flex whitespace-pre-wrap group" id="repeated-permission-prompts"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#repeated-permission-prompts">​</a></div><span class="cursor-pointer">Repeated permission prompts</span></h3>
<p>If you find yourself repeatedly approving the same commands, you can allow specific tools to run without approval:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token comment"># Let npm test run without approval</span></span>
<span class="">claude config <span class="token function">add</span> allowedTools <span class="token string">"Bash(npm test)"</span></span>
<!-- -->
<span class=""><span class="token comment"># Let npm test and any of its sub-commands run without approval</span></span>
<span class="">claude config <span class="token function">add</span> allowedTools <span class="token string">"Bash(npm test:*)"</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group" id="authentication-issues"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#authentication-issues">​</a></div><span class="cursor-pointer">Authentication issues</span></h3>
<p>If you’re experiencing authentication problems:</p>
<ol>
<li>Run <code>/logout</code> to sign out completely</li>
<li>Close Claude Code</li>
<li>Restart with <code>claude</code> and complete the authentication process again</li>
</ol>
<p>If problems persist, try:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.config/claude-code/auth.json</span>
<span class="">claude</span>
</code></pre></div></div></div>
<p>This removes your stored authentication information and forces a clean login.</p>
<h2 class="flex whitespace-pre-wrap group" id="performance-and-stability"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#performance-and-stability">​</a></div><span class="cursor-pointer">Performance and stability</span></h2>
<h3 class="flex whitespace-pre-wrap group" id="high-cpu-or-memory-usage"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#high-cpu-or-memory-usage">​</a></div><span class="cursor-pointer">High CPU or memory usage</span></h3>
<p>Claude Code is designed to work with most development environments, but may consume significant resources when processing large codebases. If you’re experiencing performance issues:</p>
<ol>
<li>Use <code>/compact</code> regularly to reduce context size</li>
<li>Close and restart Claude Code between major tasks</li>
<li>Consider adding large build directories to your <code>.gitignore</code> file</li>
</ol>
<h3 class="flex whitespace-pre-wrap group" id="command-hangs-or-freezes"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#command-hangs-or-freezes">​</a></div><span class="cursor-pointer">Command hangs or freezes</span></h3>
<p>If Claude Code seems unresponsive:</p>
<ol>
<li>Press Ctrl+C to attempt to cancel the current operation</li>
<li>If unresponsive, you may need to close the terminal and restart</li>
</ol>
<h3 class="flex whitespace-pre-wrap group" id="esc-key-not-working-in-jetbrains-intellij-pycharm-etc-terminals"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#esc-key-not-working-in-jetbrains-intellij-pycharm-etc-terminals">​</a></div><span class="cursor-pointer">ESC key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals</span></h3>
<p>If you’re using Claude Code in JetBrains terminals and the ESC key doesn’t interrupt the agent as expected, this is likely due to a keybinding clash with JetBrains’ default shortcuts.</p>
<p>To fix this issue:</p>
<ol>
<li>Go to Settings → Tools → Terminal</li>
<li>Click the “Configure terminal keybindings” hyperlink next to “Override IDE Shortcuts”</li>
<li>Within the terminal keybindings, scroll down to “Switch focus to Editor” and delete that shortcut</li>
</ol>
<p>This will allow the ESC key to properly function for canceling Claude Code operations instead of being captured by PyCharm’s “Switch focus to Editor” action.</p>
<h2 class="flex whitespace-pre-wrap group" id="getting-more-help"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#getting-more-help">​</a></div><span class="cursor-pointer">Getting more help</span></h2>
<p>If you’re experiencing issues not covered here:</p>
<ol>
<li>Use the <code>/bug</code> command within Claude Code to report problems directly to Anthropic</li>
<li>Check the <a href="https://github.com/anthropics/claude-code" rel="noreferrer" target="_blank">GitHub repository</a> for known issues</li>
<li>Run <code>/doctor</code> to check the health of your Claude Code installation</li>
</ol></div><div class="leading-6 mt-14"><div class="pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200"><a class="flex items-center space-x-3 group" href="/en/docs/agents-and-tools/claude-code/tutorials"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Claude Code tutorials</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/docs/agents-and-tools/computer-use"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Computer use (beta)</span></a></div></div></div><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem]" id="table-of-contents"><div class="fixed text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 h-[calc(100%-10rem)]" id="table-of-contents-content"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div><ul><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#common-installation-issues">Common installation issues</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#linux-permission-issues">Linux permission issues</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#recommended-solution-create-a-user-writable-npm-prefix">Recommended solution: Create a user-writable npm prefix</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#system-recovery-if-you-have-run-commands-that-change-ownership-and-permissions-of-system-files-or-similar">System Recovery: If you have run commands that change ownership and permissions of system files or similar</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#auto-updater-issues">Auto-updater issues</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#permissions-and-authentication">Permissions and authentication</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#repeated-permission-prompts">Repeated permission prompts</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#authentication-issues">Authentication issues</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#performance-and-stability">Performance and stability</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#high-cpu-or-memory-usage">High CPU or memory usage</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#command-hangs-or-freezes">Command hangs or freezes</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#esc-key-not-working-in-jetbrains-intellij-pycharm-etc-terminals">ESC key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#getting-more-help">Getting more help</a></li></ul></div></div></div></div></div></div></main></div></html>