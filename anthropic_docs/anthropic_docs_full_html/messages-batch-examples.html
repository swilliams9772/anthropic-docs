<!DOCTYPE html>
<html class="dark" lang="en"><head><meta charset="utf-8"/><meta content="width=device-width" name="viewport"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/apple-touch-icon.png?v=3" rel="apple-touch-icon" sizes="180x180" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-32x32.png?v=3" rel="icon" sizes="32x32" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-16x16.png?v=3" rel="icon" sizes="16x16" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon.ico?v=3" rel="shortcut icon" type="image/x-icon"/><meta content="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/browserconfig.xml?v=3" name="msapplication-config"/><meta content="Anthropic" name="apple-mobile-web-app-title"/><meta content="Anthropic" name="application-name"/><meta content="#0E0E0E" name="msapplication-TileColor"/><meta content="#ffffff" name="theme-color"/><link href="/sitemap.xml" rel="sitemap" type="application/xml"/><meta content="utf-8" name="charset"/><meta content="website" name="og:type"/><meta content="Anthropic" name="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><meta content="Message Batches examples - Anthropic" name="og:title"/><meta content="Message Batches examples - Anthropic" name="twitter:title"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Message+Batches+examples&amp;description=Example+usage+for+the+Message+Batches+API&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="og:image"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Message+Batches+examples&amp;description=Example+usage+for+the+Message+Batches+API&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="twitter:image"/><meta content="Example usage for the Message Batches API" name="og:description"/><meta content="Example usage for the Message Batches API" name="description"/><title>Message Batches examples - Anthropic</title><meta content="/en/api/messages-batch-examples" name="og:url"/><link href="/en/api/messages-batch-examples" rel="canonical"/><meta content="25" name="next-head-count"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" rel="stylesheet"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" rel="preload" type="font/woff2"/><link as="style" href="/_next/static/css/dc50e134f609f53d.css" rel="preload"/><link data-n-g="" href="/_next/static/css/dc50e134f609f53d.css" rel="stylesheet"/><noscript data-n-css=""></noscript></head><div id="__next"><main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="z-30 fixed lg:sticky top-0 w-full" id="navbar"><div class="max-w-8xl mx-auto relative"><div class=""><div class="relative"><div class="flex items-center lg:px-12 h-16 min-w-0 mx-4 lg:mx-0"><div class="h-full relative flex-1 flex items-center gap-x-4 min-w-0 border-b border-gray-500/5 dark:border-gray-300/[0.06]"><div class="flex-1 flex items-center gap-x-4"><a href="/"><span class="sr-only">Anthropic<!-- --> home page</span></a><div class="flex items-center gap-x-2"><button aria-expanded="false" aria-haspopup="menu" class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;&gt;span]:line-clamp-1 overflow-hidden group outline-none group-hover:text-zinc-950/70 dark:group-hover:text-white/70 text-xs gap-1.5 text-gray-500 dark:text-gray-400 leading-5 font-semibold border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 rounded-full py-1 px-3 flex items-center space-x-2 whitespace-nowrap" data-state="closed" id="radix-:R25fcql6:" type="button">English</button></div></div><div class="hidden lg:block mx-px relative flex-1 bg-white dark:bg-gray-900 pointer-events-auto rounded-xl min-w-0"><button class="w-full flex items-center text-sm leading-6 rounded-xl py-1.5 pl-3.5 pr-3 shadow-sm text-gray-400 dark:text-white/50 bg-background-light dark:bg-background-dark dark:brightness-[1.1] dark:ring-1 dark:hover:brightness-[1.25] ring-1 ring-gray-400/20 hover:ring-gray-600/25 dark:ring-gray-600/30 dark:hover:ring-gray-500/30 focus:outline-primary justify-between truncate gap-2 min-w-[43px]" id="search-bar-entry" type="button"><div class="flex items-center gap-3 min-w-[42px]"><div class="truncate min-w-0">Search...</div></div></button></div><div class="flex lg:hidden items-center gap-2"><button class="text-gray-500 w-8 h-8 flex items-center justify-center hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" id="search-bar-entry-mobile" type="button"><span class="sr-only">Search...</span></button></div></div></div><div class="flex items-center h-14 py-4 px-5 lg:hidden"><button class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" type="button"><span class="sr-only">Navigation</span></button><div class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0 space-x-3"><div class="flex items-center space-x-3"><span>Message Batches</span></div><div class="font-semibold text-gray-900 truncate dark:text-gray-200">Message Batches examples</div></div></div></div><div class="hidden lg:flex px-12 h-12"><div class="h-full flex text-sm space-x-6"><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/home">Welcome</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/docs/welcome">User Guides</a><a class="group relative h-full flex items-center text-gray-800 dark:text-gray-200 font-semibold" href="/en/api/getting-started">API Reference</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/prompt-library/library">Prompt Library</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/release-notes/overview">Release Notes</a></div></div></div></div></div><div class="max-w-8xl px-4 mx-auto lg:px-8 min-h-screen"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem] top-[7.1rem]" id="sidebar"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Using the API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-started"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-started" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting started</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/ip-addresses"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/ip-addresses" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>IP addresses</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/versioning"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/versioning" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Versions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/errors"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/errors" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Errors</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/rate-limits"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/rate-limits" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Rate limits</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/client-sdks"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/client-sdks" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Client SDKs</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/supported-regions"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/supported-regions" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Supported regions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-help"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-help" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting help</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Anthropic APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Messages</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Models</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Message Batches</div></div><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/creating-message-batches"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/creating-message-batches" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Create a Message Batch</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/retrieving-message-batches"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/retrieving-message-batches" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-green-400/20 text-green-700 dark:bg-green-400/20 dark:text-green-400">GET</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Retrieve a Message Batch</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/retrieving-message-batch-results"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/retrieving-message-batch-results" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-green-400/20 text-green-700 dark:bg-green-400/20 dark:text-green-400">GET</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Retrieve Message Batch Results</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/listing-message-batches"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/listing-message-batches" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-green-400/20 text-green-700 dark:bg-green-400/20 dark:text-green-400">GET</span></span><div class="flex-1 flex items-center space-x-2.5"><div>List Message Batches</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/canceling-message-batches"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/canceling-message-batches" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Cancel a Message Batch</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/deleting-message-batches"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/deleting-message-batches" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-red-400/20 text-red-700 dark:bg-red-400/20 dark:text-red-400">DEL</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Delete a Message Batch</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-batch-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/api/messages-batch-examples" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Message Batches examples</div></div></a></li></ul></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Text Completions (Legacy)</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Admin API</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">OpenAI SDK compatibility</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/openai-sdk"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/openai-sdk" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>OpenAI SDK compatibility (beta)</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Experimental APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Prompt tools</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Amazon Bedrock API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-amazon-bedrock"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-amazon-bedrock" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Amazon Bedrock API</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Vertex AI</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-vertex-ai"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-vertex-ai" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vertex AI API</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="relative mt-8 prose prose-gray dark:prose-invert"><p>The Message Batches API supports the same set of features as the Messages API. While this page focuses on how to use the Message Batches API, see <a href="/en/api/messages-examples">Messages API examples</a> for examples of the Messages API featureset.</p>
<h2 class="flex whitespace-pre-wrap group" id="creating-a-message-batch"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#creating-a-message-batch">​</a></div><span class="cursor-pointer">Creating a Message Batch</span></h2>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msgbatch_013Zva2CMHLNnXjNJJKqJ2EF"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_batch"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"processing_status"</span><span class="token operator">:</span> <span class="token string">"in_progress"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"request_counts"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"processing"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"succeeded"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"errored"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"canceled"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"expired"</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"ended_at"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-09-24T18:37:24.100435Z"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"expires_at"</span><span class="token operator">:</span> <span class="token string">"2024-09-25T18:37:24.100435Z"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"cancel_initiated_at"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"results_url"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="polling-for-message-batch-completion"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#polling-for-message-batch-completion">​</a></div><span class="cursor-pointer">Polling for Message Batch completion</span></h2>
<p>To poll a Message Batch, you’ll need its <code>id</code>, which is provided in the response when <a href="/_sites/docs.anthropic.com/en/api/messages-batch-examples#creating-a-message-batch">creating</a> request or by <a href="/_sites/docs.anthropic.com/en/api/messages-batch-examples#listing-all-message-batches-in-a-workspace">listing</a> batches. Example <code>id</code>: <code>msgbatch_013Zva2CMHLNnXjNJJKqJ2EF</code>.</p>
<!-- -->
<h2 class="flex whitespace-pre-wrap group" id="listing-all-message-batches-in-a-workspace"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#listing-all-message-batches-in-a-workspace">​</a></div><span class="cursor-pointer">Listing all Message Batches in a Workspace</span></h2>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">Output</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-markup"><code class="language-Markup"><span class="">{</span>
<span class="">  "id": "msgbatch_013Zva2CMHLNnXjNJJKqJ2EF",</span>
<span class="">  "type": "message_batch",</span>
<span class="">  ...</span>
<span class="">}</span>
<span class="">{</span>
<span class="">  "id": "msgbatch_01HkcTjaV5uDC8jWR4ZsDV8d",</span>
<span class="">  "type": "message_batch",</span>
<span class="">  ...</span>
<span class="">}</span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="retrieving-message-batch-results"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#retrieving-message-batch-results">​</a></div><span class="cursor-pointer">Retrieving Message Batch Results</span></h2>
<p>Once your Message Batch status is <code>ended</code>, you will be able to view the <code>results_url</code> of the batch and retrieve results in the form of a <code>.jsonl</code> file.</p>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">Output</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-markup"><code class="language-Markup"><span class="">{</span>
<span class="">  "id": "my-second-request",</span>
<span class="">  "result": {</span>
<span class="">    "type": "succeeded",</span>
<span class="">    "message": {</span>
<span class="">      "id": "msg_018gCsTGsXkYJVqYPxTgDHBU",</span>
<span class="">      "type": "message",</span>
<span class="">      ...</span>
<span class="">    }</span>
<span class="">  }</span>
<span class="">}</span>
<span class="">{</span>
<span class="">  "custom_id": "my-first-request",</span>
<span class="">  "result": {</span>
<span class="">    "type": "succeeded",</span>
<span class="">    "message": {</span>
<span class="">      "id": "msg_01XFDUDYJgAACzvnptvVoYEL",</span>
<span class="">      "type": "message",</span>
<span class="">      ...</span>
<span class="">    }</span>
<span class="">  }</span>
<span class="">}</span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="canceling-a-message-batch"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#canceling-a-message-batch">​</a></div><span class="cursor-pointer">Canceling a Message Batch</span></h2>
<p>Immediately after cancellation, a batch’s <code>processing_status</code> will be <code>canceling</code>. You can use the same <a href="/_sites/docs.anthropic.com/en/api/messages-batch-examples#polling-for-message-batch-completion">polling for batch completion</a> technique to poll for when cancellation is finalized as canceled batches also end up <code>ended</code> and may contain results.</p>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msgbatch_013Zva2CMHLNnXjNJJKqJ2EF"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_batch"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"processing_status"</span><span class="token operator">:</span> <span class="token string">"canceling"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"request_counts"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"processing"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"succeeded"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"errored"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"canceled"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"expired"</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"ended_at"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-09-24T18:37:24.100435Z"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"expires_at"</span><span class="token operator">:</span> <span class="token string">"2024-09-25T18:37:24.100435Z"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"cancel_initiated_at"</span><span class="token operator">:</span> <span class="token string">"2024-09-24T18:39:03.114875Z"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"results_url"</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div class="leading-6 mt-14"><div class="pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200"><a class="flex items-center space-x-3 group" href="/en/api/deleting-message-batches"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Delete a Message Batch</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/api/complete"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Create a Text Completion</span></a></div></div></div><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem]" id="table-of-contents"><div class="fixed text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 h-[calc(100%-10rem)]" id="table-of-contents-content"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div><ul><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#creating-a-message-batch">Creating a Message Batch</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#polling-for-message-batch-completion">Polling for Message Batch completion</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#listing-all-message-batches-in-a-workspace">Listing all Message Batches in a Workspace</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#retrieving-message-batch-results">Retrieving Message Batch Results</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#canceling-a-message-batch">Canceling a Message Batch</a></li></ul></div></div></div></div></div></div></main></div></html>