<!DOCTYPE html>
<html class="dark" lang="en"><head><meta charset="utf-8"/><meta content="width=device-width" name="viewport"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/apple-touch-icon.png?v=3" rel="apple-touch-icon" sizes="180x180" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-32x32.png?v=3" rel="icon" sizes="32x32" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon-16x16.png?v=3" rel="icon" sizes="16x16" type="image/png"/><link href="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/favicon.ico?v=3" rel="shortcut icon" type="image/x-icon"/><meta content="https://mintlify.s3-us-west-1.amazonaws.com/anthropic/_generated/favicon/browserconfig.xml?v=3" name="msapplication-config"/><meta content="Anthropic" name="apple-mobile-web-app-title"/><meta content="Anthropic" name="application-name"/><meta content="#0E0E0E" name="msapplication-TileColor"/><meta content="#ffffff" name="theme-color"/><link href="/sitemap.xml" rel="sitemap" type="application/xml"/><meta content="utf-8" name="charset"/><meta content="website" name="og:type"/><meta content="Anthropic" name="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><meta content="Tool use with Claude - Anthropic" name="og:title"/><meta content="Tool use with Claude - Anthropic" name="twitter:title"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Tool+use+with+Claude&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="og:image"/><meta content="https://mintlify.com/docs/api/og?division=Documentation&amp;mode=light&amp;title=Tool+use+with+Claude&amp;logoLight=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Flight.svg&amp;logoDark=https%3A%2F%2Fmintlify.s3.us-west-1.amazonaws.com%2Fanthropic%2Flogo%2Fdark.svg&amp;primaryColor=%230E0E0E&amp;lightColor=%23D4A27F&amp;darkColor=%230E0E0E" name="twitter:image"/><title>Tool use with Claude - Anthropic</title><meta content="/en/docs/build-with-claude/tool-use/overview" name="og:url"/><link href="/en/docs/build-with-claude/tool-use/overview" rel="canonical"/><meta content="23" name="next-head-count"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" rel="stylesheet"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" data-next-font="size-adjust" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" rel="preload" type="font/woff2"/><link as="style" href="/_next/static/css/dc50e134f609f53d.css" rel="preload"/><link data-n-g="" href="/_next/static/css/dc50e134f609f53d.css" rel="stylesheet"/><noscript data-n-css=""></noscript></head><div id="__next"><main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="z-30 fixed lg:sticky top-0 w-full" id="navbar"><div class="max-w-8xl mx-auto relative"><div class=""><div class="relative"><div class="flex items-center lg:px-12 h-16 min-w-0 mx-4 lg:mx-0"><div class="h-full relative flex-1 flex items-center gap-x-4 min-w-0 border-b border-gray-500/5 dark:border-gray-300/[0.06]"><div class="flex-1 flex items-center gap-x-4"><a href="/"><span class="sr-only">Anthropic<!-- --> home page</span></a><div class="flex items-center gap-x-2"><button aria-expanded="false" aria-haspopup="menu" class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;&gt;span]:line-clamp-1 overflow-hidden group outline-none group-hover:text-zinc-950/70 dark:group-hover:text-white/70 text-xs gap-1.5 text-gray-500 dark:text-gray-400 leading-5 font-semibold border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 rounded-full py-1 px-3 flex items-center space-x-2 whitespace-nowrap" data-state="closed" id="radix-:R25fcql6:" type="button">English</button></div></div><div class="hidden lg:block mx-px relative flex-1 bg-white dark:bg-gray-900 pointer-events-auto rounded-xl min-w-0"><button class="w-full flex items-center text-sm leading-6 rounded-xl py-1.5 pl-3.5 pr-3 shadow-sm text-gray-400 dark:text-white/50 bg-background-light dark:bg-background-dark dark:brightness-[1.1] dark:ring-1 dark:hover:brightness-[1.25] ring-1 ring-gray-400/20 hover:ring-gray-600/25 dark:ring-gray-600/30 dark:hover:ring-gray-500/30 focus:outline-primary justify-between truncate gap-2 min-w-[43px]" id="search-bar-entry" type="button"><div class="flex items-center gap-3 min-w-[42px]"><div class="truncate min-w-0">Search...</div></div></button></div><div class="flex lg:hidden items-center gap-2"><button class="text-gray-500 w-8 h-8 flex items-center justify-center hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" id="search-bar-entry-mobile" type="button"><span class="sr-only">Search...</span></button></div></div></div><div class="flex items-center h-14 py-4 px-5 lg:hidden"><button class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" type="button"><span class="sr-only">Navigation</span></button><div class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0 space-x-3"><div class="flex items-center space-x-3"><span>Tool use (function calling)</span></div><div class="font-semibold text-gray-900 truncate dark:text-gray-200">Tool use with Claude</div></div></div></div><div class="hidden lg:flex px-12 h-12"><div class="h-full flex text-sm space-x-6"><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/home">Welcome</a><a class="group relative h-full flex items-center text-gray-800 dark:text-gray-200 font-semibold" href="/en/docs/welcome">User Guides</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/api/getting-started">API Reference</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/prompt-library/library">Prompt Library</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/release-notes/overview">Release Notes</a></div></div></div></div></div><div class="max-w-8xl px-4 mx-auto lg:px-8 min-h-screen"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem] top-[7.1rem]" id="sidebar"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Get started</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/welcome"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/welcome" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Overview</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/initial-setup"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/initial-setup" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Initial setup</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/intro-to-claude"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/intro-to-claude" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Intro to Claude</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Learn about Claude</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Use cases</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Models &amp; pricing</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="https://trust.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://trust.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Security and compliance</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Build with Claude</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/define-success"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/define-success" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Define success criteria</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/develop-tests"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/develop-tests" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Develop test cases</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/context-windows"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/context-windows" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Context windows</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/vision"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/vision" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vision</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Prompt engineering</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/extended-thinking"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/extended-thinking" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Extended thinking</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/multilingual-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/multilingual-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Multilingual support</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Tool use (function calling)</div></div><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/tool-use/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/docs/build-with-claude/tool-use/overview" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Overview</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/tool-use/token-efficient-tool-use"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/tool-use/token-efficient-tool-use" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Token-efficient tool use (beta)</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/tool-use/text-editor-tool"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/tool-use/text-editor-tool" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Text editor tool</div></div></a></li></ul></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/prompt-caching"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/prompt-caching" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Prompt caching</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/pdf-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/pdf-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>PDF support</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/citations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/citations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Citations</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/token-counting"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/token-counting" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Token counting</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/batch-processing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/batch-processing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Batch processing</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/embeddings"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/embeddings" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Embeddings</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Agents and tools</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Claude Code</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/computer-use"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/computer-use" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Computer use (beta)</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/mcp"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/mcp" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model Context Protocol (MCP)</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-for-sheets"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-for-sheets" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Google Sheets add-on</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Test and evaluate</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Strengthen guardrails</div></div></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/eval-tool"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/eval-tool" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Using the Evaluation Tool</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Administration</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/administration/administration-api"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/administration/administration-api" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Admin API</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Resources</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/glossary"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/glossary" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Glossary</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/model-deprecations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/model-deprecations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model deprecations</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://status.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://status.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>System status</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://assets.anthropic.com/m/61e7d27f8c8f5919/original/Claude-3-Model-Card.pdf"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://assets.anthropic.com/m/61e7d27f8c8f5919/original/Claude-3-Model-Card.pdf" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Claude 3 model card</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://anthropic.com/claude-3-7-sonnet-system-card"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://anthropic.com/claude-3-7-sonnet-system-card" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Claude 3.7 system card</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://github.com/anthropics/anthropic-cookbook"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://github.com/anthropics/anthropic-cookbook" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Cookbook</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="https://github.com/anthropics/courses"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://github.com/anthropics/courses" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Courses</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/docs/resources/api-features"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/resources/api-features" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>API features</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Legal center</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="https://www.anthropic.com/legal/privacy"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/legal/privacy" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Privacy Policy</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="relative mt-8 prose prose-gray dark:prose-invert"><p>Claude is capable of interacting with external client-side tools and functions, allowing you to equip Claude with your own custom tools to perform a wider variety of tasks.</p>
<div class="my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10"><div class="text-sm prose min-w-0 text-emerald-900 dark:text-emerald-200"><p>Learn everything you need to master tool use with Claude via our new
comprehensive <a href="https://github.com/anthropics/courses/tree/master/tool_use" rel="noreferrer" target="_blank">tool use
course</a>! Please
continue to share your ideas and suggestions using this
<a href="https://forms.gle/BFnYc6iCkWoRzFgk7" rel="noreferrer" target="_blank">form</a>.</p></div></div>
<p>Here’s an example of how to provide tools to Claude using the Messages API:</p>
<!-- -->

<h2 class="flex whitespace-pre-wrap group" id="how-tool-use-works"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#how-tool-use-works">​</a></div><span class="cursor-pointer">How tool use works</span></h2>
<p>Integrate external tools with Claude in these steps:</p>
<div class="ml-3.5 mt-10 mb-6" role="list"><div class="relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">1</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200">Provide Claude with tools and a user prompt</p><div><ul>
<li>Define tools with names, descriptions, and input schemas in your API request.</li>
<li>Include a user prompt that might require these tools, e.g., “What’s the weather in San Francisco?”</li>
</ul></div></div></div><div class="relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">2</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200">Claude decides to use a tool</p><div><ul>
<li>Claude assesses if any tools can help with the user’s query.</li>
<li>If yes, Claude constructs a properly formatted tool use request.</li>
<li>The API response has a <code>stop_reason</code> of <code>tool_use</code>, signaling Claude’s intent.</li>
</ul></div></div></div><div class="relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">3</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200">Extract tool input, run code, and return results</p><div><ul>
<li>On your end, extract the tool name and input from Claude’s request.</li>
<li>Execute the actual tool code client-side.</li>
<li>Continue the conversation with a new <code>user</code> message containing a <code>tool_result</code> content block.</li>
</ul></div></div></div><div class="relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">4</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200">Claude uses tool result to formulate a response</p><div><ul>
<li>Claude analyzes the tool results to craft its final response to the original user prompt.</li>
</ul></div></div></div></div>
<p>Note: Steps 3 and 4 are optional. For some workflows, Claude’s tool use request (step 2) might be all you need, without sending results back to Claude.</p>
<div class="my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10"><div class="text-sm prose min-w-0 text-emerald-900 dark:text-emerald-200"><p><strong>Tools are user-provided</strong></p><p>It’s important to note that Claude does not have access to any built-in server-side tools. All tools must be explicitly provided by you, the user, in each API request. This gives you full control and flexibility over the tools Claude can use.</p><p>The <a href="/en/docs/build-with-claude/computer-use">computer use (beta)</a> functionality is an exception - it introduces tools that are provided by Anthropic but implemented by you, the user.</p></div></div>

<h2 class="flex whitespace-pre-wrap group" id="how-to-implement-tool-use"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#how-to-implement-tool-use">​</a></div><span class="cursor-pointer">How to implement tool use</span></h2>
<h3 class="flex whitespace-pre-wrap group" id="choosing-a-model"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#choosing-a-model">​</a></div><span class="cursor-pointer">Choosing a model</span></h3>
<p>Generally, use Claude 3.7 Sonnet, Claude 3.5 Sonnet or Claude 3 Opus for complex tools and ambiguous queries; they handle multiple tools better and seek clarification when needed.</p>
<p>Use Claude 3.5 Haiku or Claude 3 Haiku for straightforward tools, but note they may infer missing parameters.</p>
<div class="my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10"><div class="text-sm prose min-w-0 text-emerald-900 dark:text-emerald-200"> If using Claude 3.7 Sonnet with tool use and extended thinking, refer to our guide <a href="/en/docs/build-with-claude/extended-thinking">here</a> for more information.</div></div>
<h3 class="flex whitespace-pre-wrap group" id="specifying-tools"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#specifying-tools">​</a></div><span class="cursor-pointer">Specifying tools</span></h3>
<p>Tools are specified in the <code>tools</code> top-level parameter of the API request. Each tool definition includes:</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>name</code></td><td style="text-align:left">The name of the tool. Must match the regex <code>^[a-zA-Z0-9_-]{1,64}$</code>.</td></tr><tr><td style="text-align:left"><code>description</code></td><td style="text-align:left">A detailed plaintext description of what the tool does, when it should be used, and how it behaves.</td></tr><tr><td style="text-align:left"><code>input_schema</code></td><td style="text-align:left">A <a href="https://json-schema.org/" rel="noreferrer" target="_blank">JSON Schema</a> object defining the expected parameters for the tool.</td></tr></tbody></table>
<div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-simple-tool-definition accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example simple tool definition</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-simple-tool-definition accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_weather"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Get the current weather in a given location"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"input_schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"location"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"The city and state, e.g. San Francisco, CA"</span></span>
<span class="">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"celsius"</span><span class="token punctuation">,</span> <span class="token string">"fahrenheit"</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"The unit of temperature, either 'celsius' or 'fahrenheit'"</span></span>
<span class="">      <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"location"</span><span class="token punctuation">]</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div><p>This tool, named <code>get_weather</code>, expects an input object with a required <code>location</code> string and an optional <code>unit</code> string that must be either “celsius” or “fahrenheit”.</p></div></div>
<h4 class="flex whitespace-pre-wrap group" id="tool-use-system-prompt"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#tool-use-system-prompt">​</a></div><span class="cursor-pointer">Tool use system prompt</span></h4>
<p>When you call the Anthropic API with the <code>tools</code> parameter, we construct a special system prompt from the tool definitions, tool configuration, and any user-specified system prompt. The constructed prompt is designed to instruct the model to use the specified tool(s) and provide the necessary context for the tool to operate properly:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-plaintext"><code><span class="">In this environment you have access to a set of tools you can use to answer the user's question.</span>
<span class="">{{ FORMATTING INSTRUCTIONS }}</span>
<span class="">String and scalar parameters should be specified as is, while lists and objects should use JSON format. Note that spaces for string values are not stripped. The output is not expected to be valid XML and is parsed with regular expressions.</span>
<span class="">Here are the functions available in JSONSchema format:</span>
<span class="">{{ TOOL DEFINITIONS IN JSON SCHEMA }}</span>
<span class="">{{ USER SYSTEM PROMPT }}</span>
<span class="">{{ TOOL CONFIGURATION }}</span>
</code></pre></div></div></div>
<h4 class="flex whitespace-pre-wrap group" id="best-practices-for-tool-definitions"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#best-practices-for-tool-definitions">​</a></div><span class="cursor-pointer">Best practices for tool definitions</span></h4>
<p>To get the best performance out of Claude when using tools, follow these guidelines:</p>
<ul>
<li><strong>Provide extremely detailed descriptions.</strong> This is by far the most important factor in tool performance. Your descriptions should explain every detail about the tool, including:<!-- -->
<ul>
<li>What the tool does</li>
<li>When it should be used (and when it shouldn’t)</li>
<li>What each parameter means and how it affects the tool’s behavior</li>
<li>Any important caveats or limitations, such as what information the tool does not return if the tool name is unclear. The more context you can give Claude about your tools, the better it will be at deciding when and how to use them. Aim for at least 3-4 sentences per tool description, more if the tool is complex.</li>
</ul>
</li>
<li><strong>Prioritize descriptions over examples.</strong> While you can include examples of how to use a tool in its description or in the accompanying prompt, this is less important than having a clear and comprehensive explanation of the tool’s purpose and parameters. Only add examples after you’ve fully fleshed out the description.</li>
</ul>
<div class="[&amp;&gt;div]:border-0 [&amp;&gt;div]:rounded-none [&amp;&gt;div&gt;button]:rounded-none [&amp;&gt;div]:mb-0 overflow-hidden mt-0 mb-3 rounded-xl prose prose-gray dark:prose-invert divide-y divide-inherit border dark:border-gray-800/50"><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-of-a-good-tool-description accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example of a good tool description</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-of-a-good-tool-description accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_stock_price"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Retrieves the current stock price for a given ticker symbol. The ticker symbol must be a valid symbol for a publicly traded company on a major US stock exchange like NYSE or NASDAQ. The tool will return the latest trade price in USD. It should be used when the user asks about the current or most recent price of a specific stock. It will not provide any other information about the stock or company."</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"input_schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"ticker"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"The stock ticker symbol, e.g. AAPL for Apple Inc."</span></span>
<span class="">      <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ticker"</span><span class="token punctuation">]</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-poor-tool-description accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example poor tool description</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-poor-tool-description accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_stock_price"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Gets the stock price for a ticker."</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"input_schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"ticker"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span></span>
<span class="">      <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ticker"</span><span class="token punctuation">]</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div></div>
<p>The good description clearly explains what the tool does, when to use it, what data it returns, and what the <code>ticker</code> parameter means. The poor description is too brief and leaves Claude with many open questions about the tool’s behavior and usage.</p>
<h3 class="flex whitespace-pre-wrap group" id="controlling-claudes-output"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#controlling-claudes-output">​</a></div><span class="cursor-pointer">Controlling Claude’s output</span></h3>
<h4 class="flex whitespace-pre-wrap group" id="forcing-tool-use"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#forcing-tool-use">​</a></div><span class="cursor-pointer">Forcing tool use</span></h4>
<p>In some cases, you may want Claude to use a specific tool to answer the user’s question, even if Claude thinks it can provide an answer without using a tool. You can do this by specifying the tool in the <code>tool_choice</code> field like so:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-plaintext"><code><span class="">tool_choice = {"type": "tool", "name": "get_weather"}</span>
</code></pre></div></div></div>
<p>When working with the tool_choice parameter, we have four possible options:</p>
<ul>
<li><code>auto</code> allows Claude to decide whether to call any provided tools or not. This is the default value when <code>tools</code> are provided.</li>
<li><code>any</code> tells Claude that it must use one of the provided tools, but doesn’t force a particular tool.</li>
<li><code>tool</code> allows us to force Claude to always use a particular tool.</li>
<li><code>none</code> prevents Claude from using any tools. This is the default value when no <code>tools</code> are provided.</li>
</ul>
<p>This diagram illustrates how each option works:</p>

<p>Note that when you have <code>tool_choice</code> as <code>any</code> or <code>tool</code>, we will prefill the assistant message to force a tool to be used. This means that the models will not emit a chain-of-thought <code>text</code> content block before <code>tool_use</code> content blocks, even if explicitly asked to do so.</p>
<p>Our testing has shown that this should not reduce performance. If you would like to keep chain-of-thought (particularly with Opus) while still requesting that the model use a specific tool, you can use <code>{"type": "auto"}</code> for <code>tool_choice</code> (the default) and add explicit instructions in a <code>user</code> message. For example: <code>What's the weather like in London? Use the get_weather tool in your response.</code></p>
<h4 class="flex whitespace-pre-wrap group" id="json-output"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#json-output">​</a></div><span class="cursor-pointer">JSON output</span></h4>
<p>Tools do not necessarily need to be client-side functions — you can use tools anytime you want the model to return JSON output that follows a provided schema. For example, you might use a <code>record_summary</code> tool with a particular schema. See <a href="/en/docs/build-with-claude/tool-use#json-mode">tool use examples</a> for a full working example.</p>
<h4 class="flex whitespace-pre-wrap group" id="chain-of-thought"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#chain-of-thought">​</a></div><span class="cursor-pointer">Chain of thought</span></h4>
<p>When using tools, Claude will often show its “chain of thought”, i.e. the step-by-step reasoning it uses to break down the problem and decide which tools to use. The Claude 3 Opus model will do this if <code>tool_choice</code> is set to <code>auto</code> (this is the default value, see <a href="/_sites/docs.anthropic.com/en/docs/build-with-claude/tool-use/overview#forcing-tool-use">Forcing tool use</a>), and Sonnet and Haiku can be prompted into doing it.</p>
<p>For example, given the prompt “What’s the weather like in San Francisco right now, and what time is it there?”, Claude might respond with:</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"&lt;thinking&gt;To answer this question, I will: 1. Use the get_weather tool to get the current weather in San Francisco. 2. Use the get_time tool to get the current time in the America/Los_Angeles timezone, which covers San Francisco, CA.&lt;/thinking&gt;"</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_weather"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"input"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"location"</span><span class="token operator">:</span> <span class="token string">"San Francisco, CA"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<p>This chain of thought gives insight into Claude’s reasoning process and can help you debug unexpected behavior.</p>
<p>With the Claude 3 Sonnet model, chain of thought is less common by default, but you can prompt Claude to show its reasoning by adding something like <code>"Before answering, explain your reasoning step-by-step in tags."</code> to the user message or system prompt.</p>
<p>It’s important to note that while the <code>&lt;thinking&gt;</code> tags are a common convention Claude uses to denote its chain of thought, the exact format (such as what this XML tag is named) may change over time. Your code should treat the chain of thought like any other assistant-generated text, and not rely on the presence or specific formatting of the <code>&lt;thinking&gt;</code> tags.</p>
<h4 class="flex whitespace-pre-wrap group" id="parallel-tool-use"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#parallel-tool-use">​</a></div><span class="cursor-pointer">Parallel tool use</span></h4>
<p>By default, Claude may use multiple tools to answer a user query. You can disable this behavior by:</p>
<ul>
<li>Setting <code>disable_parallel_tool_use=true</code> when tool_choice type is <code>auto</code>, which ensures that Claude uses <strong>at most one</strong> tool</li>
<li>Setting <code>disable_parallel_tool_use=true</code> when tool_choice type is <code>any</code> or <code>tool</code>, which ensures that Claude uses <strong>exactly one</strong> tool</li>
</ul>
<div class="my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-amber-500/20 bg-amber-50/50 dark:border-amber-500/30 dark:bg-amber-500/10"><div class="text-sm prose min-w-0 text-amber-900 dark:text-amber-200"><p><strong>Parallel tool use with Claude 3.7 Sonnet</strong></p><p>Claude 3.7 Sonnet may be less likely to make make parallel tool calls in a response, even when you have not set <code>disable_parallel_tool_use</code>. To work around this, we recommend enabling <a href="/en/docs/build-with-claude/tool-use/token-efficient-tool-use">token-efficient tool use</a>, which helps encourage Claude to use parallel tools.</p><p>If you prefer not to opt into the token-efficient tool use beta, you can also introduce a “batch tool” that can act as a meta-tool to wrap invocations to other tools simultaneously. We find that if this tool is present, the model will use it to simultaneously call multiple tools in parallel for you.</p><p>See <a href="https://github.com/anthropics/anthropic-cookbook/blob/main/tool_use/parallel_tools_claude_3_7_sonnet.ipynb" rel="noreferrer" target="_blank">this example</a> in our cookbook for how to use this workaround.</p></div></div>
<h3 class="flex whitespace-pre-wrap group" id="handling-tool-use-and-tool-result-content-blocks"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#handling-tool-use-and-tool-result-content-blocks">​</a></div><span class="cursor-pointer">Handling tool use and tool result content blocks</span></h3>
<p>When Claude decides to use one of the tools you’ve provided, it will return a response with a <code>stop_reason</code> of <code>tool_use</code> and one or more <code>tool_use</code> content blocks in the API response that include:</p>
<ul>
<li><code>id</code>: A unique identifier for this particular tool use block. This will be used to match up the tool results later.</li>
<li><code>name</code>: The name of the tool being used.</li>
<li><code>input</code>: An object containing the input being passed to the tool, conforming to the tool’s <code>input_schema</code>.</li>
</ul>
<div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-api-response-with-a-tool-use-content-block accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example API response with a `tool_use` content block</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-api-response-with-a-tool-use-content-block accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01Aq9w938a90dw8q"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"&lt;thinking&gt;I need to use the get_weather, and the user wants SF, which is likely San Francisco, CA.&lt;/thinking&gt;"</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_weather"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"input"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"location"</span><span class="token operator">:</span> <span class="token string">"San Francisco, CA"</span><span class="token punctuation">,</span> <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"celsius"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div>
<p>When you receive a tool use response, you should:</p>
<ol>
<li>Extract the <code>name</code>, <code>id</code>, and <code>input</code> from the <code>tool_use</code> block.</li>
<li>Run the actual tool in your codebase corresponding to that tool name, passing in the tool <code>input</code>.</li>
<li>Continue the conversation by sending a new message with the <code>role</code> of <code>user</code>, and a <code>content</code> block containing the <code>tool_result</code> type and the following information:<!-- -->
<ul>
<li><code>tool_use_id</code>: The <code>id</code> of the tool use request this is a result for.</li>
<li><code>content</code>: The result of the tool, as a string (e.g. <code>"content": "15 degrees"</code>) or list of nested content blocks (e.g. <code>"content": [{"type": "text", "text": "15 degrees"}]</code>). These content blocks can use the <code>text</code> or <code>image</code> types.</li>
<li><code>is_error</code> (optional): Set to <code>true</code> if the tool execution resulted in an error.</li>
</ul>
</li>
</ol>
<div class="[&amp;&gt;div]:border-0 [&amp;&gt;div]:rounded-none [&amp;&gt;div&gt;button]:rounded-none [&amp;&gt;div]:mb-0 overflow-hidden mt-0 mb-3 rounded-xl prose prose-gray dark:prose-invert divide-y divide-inherit border dark:border-gray-800/50"><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-of-successful-tool-result accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example of successful tool result</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-of-successful-tool-result accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_result"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"tool_use_id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"15 degrees"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-of-tool-result-with-images accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example of tool result with images</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-of-tool-result-with-images accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_result"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"tool_use_id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"15 degrees"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span></span>
<span class="">          <span class="token property">"source"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"base64"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token property">"media_type"</span><span class="token operator">:</span> <span class="token string">"image/jpeg"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"/9j/4AAQSkZJRg..."</span><span class="token punctuation">,</span></span>
<span class="">          <span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">      <span class="token punctuation">]</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="example-of-empty-tool-result accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Example of empty tool result</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="example-of-empty-tool-result accordion children"><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_result"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"tool_use_id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div></div>
<p>After receiving the tool result, Claude will use that information to continue generating a response to the original user prompt.</p>
<div class="my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10"><div class="text-sm prose min-w-0 text-emerald-900 dark:text-emerald-200"><p><strong>Differences from other APIs</strong></p><p>Unlike APIs that separate tool use or use special roles like <code>tool</code> or <code>function</code>, Anthropic’s API integrates tools directly into the <code>user</code> and <code>assistant</code> message structure.</p><p>Messages contain arrays of <code>text</code>, <code>image</code>, <code>tool_use</code>, and <code>tool_result</code> blocks. <code>user</code> messages include client-side content and <code>tool_result</code>, while <code>assistant</code> messages contain AI-generated content and <code>tool_use</code>.</p></div></div>
<h3 class="flex whitespace-pre-wrap group" id="troubleshooting-errors"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#troubleshooting-errors">​</a></div><span class="cursor-pointer">Troubleshooting errors</span></h3>
<p>There are a few different types of errors that can occur when using tools with Claude:</p>
<div class="[&amp;&gt;div]:border-0 [&amp;&gt;div]:rounded-none [&amp;&gt;div&gt;button]:rounded-none [&amp;&gt;div]:mb-0 overflow-hidden mt-0 mb-3 rounded-xl prose prose-gray dark:prose-invert divide-y divide-inherit border dark:border-gray-800/50"><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="tool-execution-error accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Tool execution error</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="tool-execution-error accordion children"><p>If the tool itself throws an error during execution (e.g. a network error when fetching weather data), you can return the error message in the <code>content</code> along with <code>"is_error": true</code>:</p><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_result"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"tool_use_id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"ConnectionError: the weather service API is not available (HTTP 500)"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"is_error"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div><p>Claude will then incorporate this error into its response to the user, e.g. “I’m sorry, I was unable to retrieve the current weather because the weather service API is not available. Please try again later.”</p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="max-tokens-exceeded accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Max tokens exceeded</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="max-tokens-exceeded accordion children"><p>If Claude’s response is cut off due to hitting the <code>max_tokens</code> limit, and the truncated response contains an incomplete tool use block, you’ll need to retry the request with a higher <code>max_tokens</code> value to get the full tool use.</p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="invalid-tool-name accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Invalid tool name</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="invalid-tool-name accordion children"><p>If Claude’s attempted use of a tool is invalid (e.g. missing required parameters), it usually means that the there wasn’t enough information for Claude to use the tool correctly. Your best bet during development is to try the request again with more-detailed <code>description</code> values in your tool definitions.</p><p>However, you can also continue the conversation forward with a <code>tool_result</code> that indicates the error, and Claude will try to use the tool again with the missing information filled in:</p><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_result"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"tool_use_id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"Error: Missing required 'location' parameter"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"is_error"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div><p>If a tool request is invalid or missing parameters, Claude will retry 2-3 times with corrections before apologizing to the user.</p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="search-quality-reflection-tags accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">&lt;search_quality_reflection&gt; tags</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="search-quality-reflection-tags accordion children"><p>To prevent Claude from reflecting on search quality with &lt;search_quality_reflection&gt; tags, add “Do not reflect on the quality of the returned search results in your response” to your prompt.</p></div></div></div>

<h2 class="flex whitespace-pre-wrap group" id="tool-use-examples"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#tool-use-examples">​</a></div><span class="cursor-pointer">Tool use examples</span></h2>
<p>Here are a few code examples demonstrating various tool use patterns and techniques. For brevity’s sake, the tools are simple tools, and the tool descriptions are shorter than would be ideal to ensure best performance.</p>
<div class="[&amp;&gt;div]:border-0 [&amp;&gt;div]:rounded-none [&amp;&gt;div&gt;button]:rounded-none [&amp;&gt;div]:mb-0 overflow-hidden mt-0 mb-3 rounded-xl prose prose-gray dark:prose-invert divide-y divide-inherit border dark:border-gray-800/50"><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="single-tool-example accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Single tool example</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="single-tool-example accordion children"><p>Claude will return a response similar to:</p><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01Aq9w938a90dw8q"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"&lt;thinking&gt;I need to call the get_weather function, and the user wants SF, which is likely San Francisco, CA.&lt;/thinking&gt;"</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_weather"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"input"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"location"</span><span class="token operator">:</span> <span class="token string">"San Francisco, CA"</span><span class="token punctuation">,</span> <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"celsius"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div><p>You would then need to execute the <code>get_weather</code> function with the provided input, and return the result in a new <code>user</code> message:</p><p>This will print Claude’s final response, incorporating the weather data:</p><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01Aq9w938a90dw8q"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"stop_sequence"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"The current weather in San Francisco is 15 degrees Celsius (59 degrees Fahrenheit). It's a cool day in the city by the bay!"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="multiple-tool-example accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Multiple tool example</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="multiple-tool-example accordion children"><p>You can provide Claude with multiple tools to choose from in a single request. Here’s an example with both a <code>get_weather</code> and a <code>get_time</code> tool, along with a user query that asks for both.</p><p>In this case, Claude will most likely try to use two separate tools, one at a time — <code>get_weather</code> and then <code>get_time</code> — in order to fully answer the user’s question. However, it will also occasionally output two <code>tool_use</code> blocks at once, particularly if they are not dependent on each other. You would need to execute each tool and return their results in separate <code>tool_result</code> blocks within a single <code>user</code> message.</p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="missing-information accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Missing information</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="missing-information accordion children"><p>If the user’s prompt doesn’t include enough information to fill all the required parameters for a tool, Claude 3 Opus is much more likely to recognize that a parameter is missing and ask for it. Claude 3 Sonnet may ask, especially when prompted to think before outputting a tool request. But it may also do its best to infer a reasonable value.</p><p>For example, using the <code>get_weather</code> tool above, if you ask Claude “What’s the weather?” without specifying a location, Claude, particularly Claude 3 Sonnet, may make a guess about tools inputs:</p><div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tool_use"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"toolu_01A09q90qw90lq917835lq9"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"get_weather"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"input"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"location"</span><span class="token operator">:</span> <span class="token string">"New York, NY"</span><span class="token punctuation">,</span> <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"fahrenheit"</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div><p>This behavior is not guaranteed, especially for more ambiguous prompts and for models less intelligent than Claude 3 Opus. If Claude 3 Opus doesn’t have enough context to fill in the required parameters, it is far more likely respond with a clarifying question instead of making a tool call.</p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="sequential-tools accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Sequential tools</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="sequential-tools accordion children"><p>Some tasks may require calling multiple tools in sequence, using the output of one tool as the input to another. In such a case, Claude will call one tool at a time. If prompted to call the tools all at once, Claude is likely to guess parameters for tools further downstream if they are dependent on tool results for tools further upstream.</p><p>Here’s an example of using a <code>get_location</code> tool to get the user’s location, then passing that location to the <code>get_weather</code> tool:</p><p>In this case, Claude would first call the <code>get_location</code> tool to get the user’s location. After you return the location in a <code>tool_result</code>, Claude would then call <code>get_weather</code> with that location to get the final answer.</p><p>The full conversation might look like:</p><table><thead><tr><th>Role</th><th>Content</th></tr></thead><tbody><tr><td>User</td><td>What’s the weather like where I am?</td></tr><tr><td>Assistant</td><td>&lt;thinking&gt;To answer this, I first need to determine the user’s location using the get_location tool. Then I can pass that location to the get_weather tool to find the current weather there.&lt;/thinking&gt;[Tool use for get_location]</td></tr><tr><td>User</td><td>[Tool result for get_location with matching id and result of San Francisco, CA]</td></tr><tr><td>Assistant</td><td>[Tool use for get_weather with the following input]{ “location”: “San Francisco, CA”, “unit”: “fahrenheit” }</td></tr><tr><td>User</td><td>[Tool result for get_weather with matching id and result of “59°F (15°C), mostly cloudy”]</td></tr><tr><td>Assistant</td><td>Based on your current location in San Francisco, CA, the weather right now is 59°F (15°C) and mostly cloudy. It’s a fairly cool and overcast day in the city. You may want to bring a light jacket if you’re heading outside.</td></tr></tbody></table><p>This example demonstrates how Claude can chain together multiple tool calls to answer a question that requires gathering data from different sources. The key steps are:</p><ol>
<li>Claude first realizes it needs the user’s location to answer the weather question, so it calls the <code>get_location</code> tool.</li>
<li>The user (i.e. the client code) executes the actual <code>get_location</code> function and returns the result “San Francisco, CA” in a <code>tool_result</code> block.</li>
<li>With the location now known, Claude proceeds to call the <code>get_weather</code> tool, passing in “San Francisco, CA” as the <code>location</code> parameter (as well as a guessed <code>unit</code> parameter, as <code>unit</code> is not a required parameter).</li>
<li>The user again executes the actual <code>get_weather</code> function with the provided arguments and returns the weather data in another <code>tool_result</code> block.</li>
<li>Finally, Claude incorporates the weather data into a natural language response to the original question.</li>
</ol></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="chain-of-thought-tool-use accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">Chain of thought tool use</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="chain-of-thought-tool-use accordion children"><p>By default, Claude 3 Opus is prompted to think before it answers a tool use query to best determine whether a tool is necessary, which tool to use, and the appropriate parameters. Claude 3 Sonnet and Claude 3 Haiku are prompted to try to use tools as much as possible and are more likely to call an unnecessary tool or infer missing parameters. To prompt Sonnet or Haiku to better assess the user query before making tool calls, the following prompt can be used:</p><p>Chain of thought prompt</p><p><code>Answer the user's request using relevant tools (if they are available). Before calling a tool, do some analysis within \&lt;thinking&gt;\&lt;/thinking&gt; tags. First, think about which of the provided tools is the relevant tool to answer the user's request. Second, go through each of the required parameters of the relevant tool and determine if the user has directly provided or given enough information to infer a value. When deciding if the parameter can be inferred, carefully consider all the context to see if it supports a specific value. If all of the required parameters are present or can be reasonably inferred, close the thinking tag and proceed with the tool call. BUT, if one of the values for a required parameter is missing, DO NOT invoke the function (not even with fillers for the missing params) and instead, ask the user to provide the missing parameters. DO NOT ask for more information on optional parameters if it is not provided.     </code></p></div></div><div class="border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock" role="button"><button aria-controls="json-mode accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl"><div class="leading-tight text-left"><p class="m-0 font-medium text-gray-900 dark:text-gray-200">JSON mode</p></div></button><div class="mt-2 mb-4 mx-6 hidden" id="json-mode accordion children"><p>You can use tools to get Claude produce JSON output that follows a schema, even if you don’t have any intention of running that output through a tool or function.</p><p>When using tools in this way:</p><ul>
<li>You usually want to provide a <strong>single</strong> tool</li>
<li>You should set <code>tool_choice</code> (see <a href="/en/docs/tool-use#forcing-tool-use">Forcing tool use</a>) to instruct the model to explicitly use that tool</li>
<li>Remember that the model will pass the <code>input</code> to the tool, so the name of the tool and description should be from the model’s perspective.</li>
</ul><p>The following uses a <code>record_summary</code> tool to describe an image following a particular format.</p></div></div></div>

<h2 class="flex whitespace-pre-wrap group" id="pricing"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#pricing">​</a></div><span class="cursor-pointer">Pricing</span></h2>
<p>Tool use requests are priced the same as any other Claude API request, based on the total number of input tokens sent to the model (including in the <code>tools</code> parameter) and the number of output tokens generated.”</p>
<p>The additional tokens from tool use come from:</p>
<ul>
<li>The <code>tools</code> parameter in API requests (tool names, descriptions, and schemas)</li>
<li><code>tool_use</code> content blocks in API requests and responses</li>
<li><code>tool_result</code> content blocks in API requests</li>
</ul>
<p>When you use <code>tools</code>, we also automatically include a special system prompt for the model which enables tool use. The number of tool use tokens required for each model are listed below (excluding the additional tokens listed above). Note that the table assumes at least 1 tool is provided. If no <code>tools</code> are provided, then a tool choice of <code>none</code> uses 0 additional system prompt tokens.</p>
<table><thead><tr><th>Model</th><th>Tool choice</th><th>Tool use system prompt token count</th></tr></thead><tbody><tr><td>Claude 3.7 Sonnet</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>346 tokens313 tokens</td></tr><tr><td>Claude 3.5 Sonnet (Oct)</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>346 tokens313 tokens</td></tr><tr><td>Claude 3 Opus</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>530 tokens281 tokens</td></tr><tr><td>Claude 3 Sonnet</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>159 tokens235 tokens</td></tr><tr><td>Claude 3 Haiku</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>264 tokens340 tokens</td></tr><tr><td>Claude 3.5 Sonnet (June)</td><td><code>auto</code>, <code>none</code><code>any</code>, <code>tool</code></td><td>294 tokens261 tokens</td></tr></tbody></table>
<p>These token counts are added to your normal input and output tokens to calculate the total cost of a request. Refer to our <a href="/en/docs/models-overview#model-comparison">models overview table</a> for current per-model prices.</p>
<p>When you send a tool use prompt, just like any other API request, the response will output both input and output token counts as part of the reported <code>usage</code> metrics.</p>

<h2 class="flex whitespace-pre-wrap group" id="next-steps"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#next-steps">​</a></div><span class="cursor-pointer">Next Steps</span></h2>
<p>Explore our repository of ready-to-implement tool use code examples in our cookbooks:</p>
<div class="not-prose grid gap-x-4 sm:grid-cols-3"><a class="card block not-prose font-normal group relative my-2 ring-2 ring-transparent rounded-2xl bg-white dark:bg-background-dark border border-gray-950/10 dark:border-white/10 overflow-hidden w-full cursor-pointer hover:!border-primary dark:hover:!border-primary-light" href="https://github.com/anthropics/anthropic-cookbook/blob/main/tool_use/calculator_tool.ipynb" rel="noreferrer" target="_blank"><div class="px-6 py-5"><div><h2 class="font-semibold text-base text-gray-800 dark:text-white mt-4">Calculator Tool</h2><div class="mt-1 font-normal text-sm leading-6 text-gray-600 dark:text-gray-400"><p>Learn how to integrate a simple calculator tool with Claude for precise numerical computations.</p></div></div></div></a><a class="card block not-prose font-normal group relative my-2 ring-2 ring-transparent rounded-2xl bg-white dark:bg-background-dark border border-gray-950/10 dark:border-white/10 overflow-hidden w-full cursor-pointer hover:!border-primary dark:hover:!border-primary-light" href="https://github.com/anthropics/anthropic-cookbook/blob/main/tool_use/customer_service_agent.ipynb" rel="noreferrer" target="_blank"><div class="px-6 py-5"><div><h2 class="font-semibold text-base text-gray-800 dark:text-white mt-4">Customer Service Agent</h2><div class="mt-1 font-normal text-sm leading-6 text-gray-600 dark:text-gray-400"><p>Build a responsive customer service bot that leverages client-side tools to
enhance support.</p></div></div></div></a><a class="card block not-prose font-normal group relative my-2 ring-2 ring-transparent rounded-2xl bg-white dark:bg-background-dark border border-gray-950/10 dark:border-white/10 overflow-hidden w-full cursor-pointer hover:!border-primary dark:hover:!border-primary-light" href="https://github.com/anthropics/anthropic-cookbook/blob/main/tool_use/extracting_structured_json.ipynb" rel="noreferrer" target="_blank"><div class="px-6 py-5"><div><h2 class="font-semibold text-base text-gray-800 dark:text-white mt-4">JSON Extractor</h2><div class="mt-1 font-normal text-sm leading-6 text-gray-600 dark:text-gray-400"><p>See how Claude and tool use can extract structured data from unstructured text.</p></div></div></div></a></div></div><div class="leading-6 mt-14"><div class="pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200"><a class="flex items-center space-x-3 group" href="/en/docs/build-with-claude/multilingual-support"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Multilingual support</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/docs/build-with-claude/tool-use/token-efficient-tool-use"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Token-efficient tool use (beta)</span></a></div></div></div><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem]" id="table-of-contents"><div class="fixed text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 h-[calc(100%-10rem)]" id="table-of-contents-content"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div><ul><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#how-tool-use-works">How tool use works</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#how-to-implement-tool-use">How to implement tool use</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#choosing-a-model">Choosing a model</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#specifying-tools">Specifying tools</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#tool-use-system-prompt">Tool use system prompt</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#best-practices-for-tool-definitions">Best practices for tool definitions</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#controlling-claudes-output">Controlling Claude’s output</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#forcing-tool-use">Forcing tool use</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#json-output">JSON output</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#chain-of-thought">Chain of thought</a></li><li style="margin-left:2rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#parallel-tool-use">Parallel tool use</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#handling-tool-use-and-tool-result-content-blocks">Handling tool use and tool result content blocks</a></li><li style="margin-left:1rem"><a class="group flex items-start py-1 whitespace-pre-wrap text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#troubleshooting-errors">Troubleshooting errors</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#tool-use-examples">Tool use examples</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#pricing">Pricing</a></li><li><a class="py-1 block font-medium hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#next-steps">Next Steps</a></li></ul></div></div></div></div></div></div></main></div></html>