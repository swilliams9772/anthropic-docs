<main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="max-w-8xl px-4 mx-auto lg:px-8"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem]" id="sidebar" style="top:7rem"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-semibold text-primary dark:text-primary-light" href="/en/home">Documentation</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">SDKs</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/client-sdks"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/client-sdks" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Client SDKs</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/openai-sdk"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/openai-sdk" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>OpenAI SDK compatibility (beta)</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Examples</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/messages-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-examples" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Messages examples</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/messages-batch-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-batch-examples" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Message Batches examples</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="mdx-content relative mt-8 prose prose-gray dark:prose-invert"><p>The Vertex API for accessing Claude is nearly-identical to the <a class="link" href="/en/api/messages">Messages API</a> and supports all of the same options, with two key differences:</p>
<ul>
<li>In Vertex, <code>model</code> is not passed in the request body. Instead, it is specified in the Google Cloud endpoint URL.</li>
<li>In Vertex, <code>anthropic_version</code> is passed in the request body (rather than as a header), and must be set to the value <code>vertex-2023-10-16</code>.</li>
</ul>
<p>Vertex is also supported by Anthropic’s official <a class="link" href="/en/api/client-sdks">client SDKs</a>. This guide will walk you through the process of making a request to Claude on Vertex AI in either Python or TypeScript.</p>
<p>Note that this guide assumes you have already have a GCP project that is able to use Vertex AI. See <a class="link" href="https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/use-claude" rel="noreferrer" target="_blank">using the Claude 3 models from Anthropic</a> for more information on the setup required, as well as a full walkthrough.</p>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="install-an-sdk-for-accessing-vertex-ai"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#install-an-sdk-for-accessing-vertex-ai">​</a></div><span class="cursor-pointer">Install an SDK for accessing Vertex AI</span></h2>
<p>First, install Anthropic’s <a class="link" href="/en/api/client-sdks">client SDK</a> for your language of choice.</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Raoqmpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rioqmpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R38qmpkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-python"><code class="language-Python"><span class="">pip install <span class="token operator">-</span>U google<span class="token operator">-</span>cloud<span class="token operator">-</span>aiplatform <span class="token string">"anthropic[vertex]"</span></span>
</code></pre></div></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="accessing-vertex-ai"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#accessing-vertex-ai">​</a></div><span class="cursor-pointer">Accessing Vertex AI</span></h2>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="model-availability"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#model-availability">​</a></div><span class="cursor-pointer">Model Availability</span></h3>
<p>Note that Anthropic model availability varies by region. Search for “Claude” in the <a class="link" href="https://console.cloud.google.com/vertex-ai/model-garden" rel="noreferrer" target="_blank">Vertex AI Model Garden</a> or go to <a class="link" href="https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/use-claude" rel="noreferrer" target="_blank">Use Claude 3</a> for the latest information.</p>
<h4 class="flex whitespace-pre-wrap group font-semibold" id="api-model-names"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#api-model-names">​</a></div><span class="cursor-pointer">API model names</span></h4>
<table><thead><tr><th>Model</th><th>Vertex AI API model name</th></tr></thead><tbody><tr><td>Claude Opus 4</td><td>claude-opus-4@20250514</td></tr><tr><td>Claude Sonnet 4</td><td>claude-sonnet-4@20250514</td></tr><tr><td>Claude Sonnet 3.7</td><td>claude-3-7-sonnet@20250219</td></tr><tr><td>Claude Haiku 3.5</td><td>claude-3-5-haiku@20241022</td></tr><tr><td>Claude Sonnet 3.5</td><td>claude-3-5-sonnet-v2@20241022</td></tr><tr><td>Claude Opus 3 (Public Preview)</td><td>claude-3-opus@20240229</td></tr><tr><td>Claude Sonnet 3</td><td>claude-3-sonnet@20240229</td></tr><tr><td>Claude Haiku 3</td><td>claude-3-haiku@20240307</td></tr></tbody></table>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="making-requests"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#making-requests">​</a></div><span class="cursor-pointer">Making requests</span></h3>
<p>Before running requests you may need to run <code>gcloud auth application-default login</code> to authenticate with GCP.</p>
<p>The following examples shows how to generate text from Claude on Vertex AI:</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Rapumpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Ripumpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rqpumpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R39umpkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-python language-python"><code class="language-Python"><span class=""><span class="token keyword">from</span> anthropic <span class="token keyword">import</span> AnthropicVertex</span>
<!-- -->
<span class="">project_id <span class="token operator">=</span> <span class="token string">"MY_PROJECT_ID"</span></span>
<span class=""><span class="token comment"># Where the model is running</span></span>
<span class="">region <span class="token operator">=</span> <span class="token string">"us-east5"</span></span>
<!-- -->
<span class="">client <span class="token operator">=</span> AnthropicVertex<span class="token punctuation">(</span>project_id<span class="token operator">=</span>project_id<span class="token punctuation">,</span> region<span class="token operator">=</span>region<span class="token punctuation">)</span></span>
<!-- -->
<span class="">message <span class="token operator">=</span> client<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="">    model<span class="token operator">=</span><span class="token string">"claude-opus-4@20250514"</span><span class="token punctuation">,</span></span>
<span class="">    max_tokens<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="">    messages<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hey Claude!"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class=""><span class="token punctuation">)</span></span>
<span class=""><span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
</code></pre></div></div></div></div>
<p>See our <a class="link" href="/en/api/client-sdks">client SDKs</a> and the official <a class="link" href="https://cloud.google.com/vertex-ai/docs" rel="noreferrer" target="_blank">Vertex AI docs</a> for more details.</p>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="activity-logging"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#activity-logging">​</a></div><span class="cursor-pointer">Activity logging</span></h2>
<p>Vertex provides a <a class="link" href="https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/request-response-logging" rel="noreferrer" target="_blank">request-response logging service</a> that allows customers to log the prompts and completions associated with your usage.</p>
<p>Anthropic recommends that you log your activity on at least a 30-day rolling basis in order to understand your activity and investigate any potential misuse.</p>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-sky-500/20 bg-sky-50/50 dark:border-sky-500/30 dark:bg-sky-500/10" data-callout-type="note"><div class="text-sm prose min-w-0 w-full text-sky-900 dark:text-sky-200" data-component-part="callout-content"><p>Turning on this service does not give Google or Anthropic any access to your content.</p></div></div></div></div><div class="hidden xl:flex self-start sticky xl:flex-col h-[calc(100vh-9.5rem)] top-[9.5rem]" id="content-side-layout"><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem] max-h-full" id="table-of-contents-layout"><div class="text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 pb-4 -mt-10 pt-10" id="table-of-contents"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div></div></div></div></div></div></div></div></main>