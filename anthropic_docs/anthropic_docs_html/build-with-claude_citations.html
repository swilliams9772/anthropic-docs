<main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="max-w-8xl px-4 mx-auto lg:px-8"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem]" id="sidebar" style="top:7rem"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-semibold text-primary dark:text-primary-light" href="/en/home">Documentation</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">First steps</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/welcome"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/welcome" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Intro to Claude</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/get-started"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/get-started" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Get started</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Models &amp; pricing</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Models overview</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/choosing-a-model"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/choosing-a-model" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Choosing a model</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/migrating-to-claude-4"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/migrating-to-claude-4" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Migrating to Claude 4</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/model-deprecations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/model-deprecations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model deprecations</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/pricing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/pricing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Pricing</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Learn about Claude</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Building with Claude</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Use cases</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/context-windows"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/context-windows" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Context windows</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/glossary"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/glossary" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Glossary</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Prompt engineering</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Explore features</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Features overview</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/prompt-caching"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/prompt-caching" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Prompt caching</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/extended-thinking"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/extended-thinking" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Extended thinking</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/streaming"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/streaming" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Streaming Messages</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/batch-processing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/batch-processing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Batch processing</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/citations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/docs/build-with-claude/citations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Citations</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/multilingual-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/multilingual-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Multilingual support</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/token-counting"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/token-counting" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Token counting</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/embeddings"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/embeddings" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Embeddings</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/vision"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/vision" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vision</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/pdf-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/pdf-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>PDF support</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Agent components</h5><ul id="sidebar-group"><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Tools</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Model Context Protocol (MCP)</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/computer-use"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/computer-use" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Computer use (beta)</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-for-sheets"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-for-sheets" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Google Sheets add-on</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Test &amp; evaluate</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/define-success"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/define-success" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Define success criteria</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/develop-tests"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/develop-tests" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Develop test cases</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Strengthen guardrails</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/eval-tool"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/eval-tool" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Using the Evaluation Tool</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Legal center</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="https://www.anthropic.com/legal/privacy"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/legal/privacy" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Privacy Policy</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="https://trust.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://trust.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Security and compliance</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="mdx-content relative mt-8 prose prose-gray dark:prose-invert"><p>Claude is capable of providing detailed citations when answering questions about documents, helping you track and verify information sources in responses.</p>
<p>The citations feature is currently available on Claude Opus 4, Claude Sonnet 4, Claude Sonnet 3.7, Claude Sonnet 3.5 (new) and Haiku 3.5.</p>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-amber-500/20 bg-amber-50/50 dark:border-amber-500/30 dark:bg-amber-500/10" data-callout-type="warning"><div class="text-sm prose min-w-0 w-full text-amber-900 dark:text-amber-200" data-component-part="callout-content"><p><em>Citations with Claude Sonnet 3.7</em></p><p>Claude Sonnet 3.7 may be less likely to make citations compared to other Claude models without more explicit instructions from the user. When using citations with Claude Sonnet 3.7, we recommend including additional instructions in the <code>user</code> turn, like <code>"Use citations to back up your answer."</code> for example.</p><p>We’ve also observed that when the model is asked to structure its response, it is unlikely to use citations unless explicitly told to use citations within that format. For example, if the model is asked to use  tags in its response, you should add something like “Always use citations in your answer, even within .”</p></div></div>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10" data-callout-type="tip"><div class="text-sm prose min-w-0 w-full text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><p>Please share your feedback and suggestions about the citations feature using this <a class="link" href="https://forms.gle/9n9hSrKnKe3rpowH9" rel="noreferrer" target="_blank">form</a>.</p></div></div>
<p>Here’s an example of how to use citations with the Messages API:</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Rlgmmpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:R15gmmpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:R1lgmmpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Java</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R6gmmpkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">  <span class="token parameter variable">-H</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">  <span class="token parameter variable">-H</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">  <span class="token parameter variable">-H</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">  <span class="token parameter variable">-d</span> '<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">      <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>,</span>
<span class="">        <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">          <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"document"</span>,</span>
<span class="">            <span class="token string">"source"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">              <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"text"</span>,</span>
<span class="">              <span class="token string">"media_type"</span><span class="token builtin class-name">:</span> <span class="token string">"text/plain"</span>,</span>
<span class="">              <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token string">"The grass is green. The sky is blue."</span></span>
<span class="">            <span class="token punctuation">}</span>,</span>
<span class="">            <span class="token string">"title"</span><span class="token builtin class-name">:</span> <span class="token string">"My Document"</span>,</span>
<span class="">            <span class="token string">"context"</span><span class="token builtin class-name">:</span> <span class="token string">"This is a trustworthy document."</span>,</span>
<span class="">            <span class="token string">"citations"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token builtin class-name">:</span> true<span class="token punctuation">}</span></span>
<span class="">          <span class="token punctuation">}</span>,</span>
<span class="">          <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"text"</span>,</span>
<span class="">            <span class="token string">"text"</span><span class="token builtin class-name">:</span> <span class="token string">"What color is the grass and sky?"</span></span>
<span class="">          <span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">]</span></span>
<span class="">      <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class="">  <span class="token punctuation">}</span>'</span>
</code></pre></div></div></div></div>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10" data-callout-type="tip"><div class="text-sm prose min-w-0 w-full text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><p><strong>Comparison with prompt-based approaches</strong></p><p>In comparison with prompt-based citations solutions, the citations feature has the following advantages:</p><ul>
<li><strong>Cost savings:</strong> If your prompt-based approach asks Claude to output direct quotes, you may see cost savings due to the fact that <code>cited_text</code> does not count towards your output tokens.</li>
<li><strong>Better citation reliability:</strong> Because we parse citations into the respective response formats mentioned above and extract <code>cited_text</code>, citations are guaranteed to contain valid pointers to the provided documents.</li>
<li><strong>Improved citation quality:</strong> In our evals, we found the citations feature to be significantly more likely to cite the most relevant quotes from documents as compared to purely prompt-based approaches.</li>
</ul></div></div>

<h2 class="flex whitespace-pre-wrap group font-semibold" id="how-citations-work"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#how-citations-work">​</a></div><span class="cursor-pointer">How citations work</span></h2>
<p>Integrate citations with Claude in these steps:</p>
<div class="steps ml-3.5 mt-10 mb-6" role="list"><div class="step relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2" contenteditable="false" data-component-part="step-number"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">1</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200" contenteditable="false" data-component-part="step-title">Provide document(s) and enable citations</p><div data-component-part="step-content"><ul>
<li>Include documents in any of the supported formats: <a class="link" href="/_sites/docs.anthropic.com/en/docs/build-with-claude/citations#pdf-documents">PDFs</a>, <a class="link" href="/_sites/docs.anthropic.com/en/docs/build-with-claude/citations#plain-text-documents">plain text</a>, or <a class="link" href="/_sites/docs.anthropic.com/en/docs/build-with-claude/citations#custom-content-documents">custom content</a> documents</li>
<li>Set <code>citations.enabled=true</code> on each of your documents. Currently, citations must be enabled on all or none of the documents within a request.</li>
<li>Note that only text citations are currently supported and image citations are not yet possible.</li>
</ul></div></div></div><div class="step relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2" contenteditable="false" data-component-part="step-number"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">2</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200" contenteditable="false" data-component-part="step-title">Documents get processed</p><div data-component-part="step-content"><ul>
<li>Document contents are “chunked” in order to define the minimum granularity of possible citations. For example, sentence chunking would allow Claude to cite a single sentence or chain together multiple consecutive sentences to cite a paragraph (or longer)!<!-- -->
<ul>
<li><strong>For PDFs:</strong> Text is extracted as described in <a class="link" href="/en/docs/build-with-claude/pdf-support">PDF Support</a> and content is chunked into sentences. Citing images from PDFs is not currently supported.</li>
<li><strong>For plain text documents:</strong> Content is chunked into sentences that can be cited from.</li>
<li><strong>For custom content documents:</strong> Your provided content blocks are used as-is and no further chunking is done.</li>
</ul>
</li>
</ul></div></div></div><div class="step relative flex items-start pb-2" role="listitem"><div class="absolute ml-[-14px] py-2" contenteditable="false" data-component-part="step-number"><div class="w-7 h-7 shrink-0 rounded-lg bg-gray-100 dark:text-white dark:bg-[#26292E] text-sm text-gray-800 font-semibold flex items-center justify-center">3</div></div><div class="w-full overflow-hidden pl-12 pr-px"><p class="mt-2 font-semibold prose dark:prose-invert text-gray-900 dark:text-gray-200" contenteditable="false" data-component-part="step-title">Claude provides cited response</p><div data-component-part="step-content"><ul>
<li>Responses may now include multiple text blocks where each text block can contain a claim that Claude is making and a list of citations that support the claim.</li>
<li>Citations reference specific locations in source documents. The format of these citations are dependent on the type of document being cited from.<!-- -->
<ul>
<li><strong>For PDFs:</strong> citations will include the page number range (1-indexed).</li>
<li><strong>For plain text documents:</strong> Citations will include the character index range (0-indexed).</li>
<li><strong>For custom content documents:</strong> Citations will include the content block index range (0-indexed) corresponding to the original content list provided.</li>
</ul>
</li>
<li>Document indices are provided to indicate the reference source and are 0-indexed according to the list of all documents in your original request.</li>
</ul></div></div></div></div>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-emerald-500/20 bg-emerald-50/50 dark:border-emerald-500/30 dark:bg-emerald-500/10" data-callout-type="tip"><div class="text-sm prose min-w-0 w-full text-emerald-900 dark:text-emerald-200" data-component-part="callout-content"><p><strong>Automatic chunking vs custom content</strong></p><p>By default, plain text and PDF documents are automatically chunked into sentences. If you need more control over citation granularity (e.g., for bullet points or transcripts), use custom content documents instead. See <a class="link" href="/_sites/docs.anthropic.com/en/docs/build-with-claude/citations#document-types">Document Types</a> for more details.</p><p>For example, if you want Claude to be able to cite specific sentences from your RAG chunks, you should put each RAG chunk into a plain text document. Otherwise, if you do not want any further chunking to be done, or if you want to customize any additional chunking, you can put RAG chunks into custom content document(s).</p></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="citable-vs-non-citable-content"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#citable-vs-non-citable-content">​</a></div><span class="cursor-pointer">Citable vs non-citable content</span></h3>
<ul>
<li>Text found within a document’s <code>source</code> content can be cited from.</li>
<li><code>title</code> and <code>context</code> are optional fields that will be passed to the model but not used towards cited content.</li>
<li><code>title</code> is limited in length so you may find the <code>context</code> field to be useful in storing any document metadata as text or stringified json.</li>
</ul>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="citation-indices"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#citation-indices">​</a></div><span class="cursor-pointer">Citation indices</span></h3>
<ul>
<li>Document indices are 0-indexed from the list of all document content blocks in the request (spanning across all messages).</li>
<li>Character indices are 0-indexed with exclusive end indices.</li>
<li>Page numbers are 1-indexed with exclusive end page numbers.</li>
<li>Content block indices are 0-indexed with exclusive end indices from the <code>content</code> list provided in the custom content document.</li>
</ul>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="token-costs"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#token-costs">​</a></div><span class="cursor-pointer">Token costs</span></h3>
<ul>
<li>Enabling citations incurs a slight increase in input tokens due to system prompt additions and document chunking.</li>
<li>However, the citations feature is very efficient with output tokens. Under the hood, the model is outputting citations in a standardized format that are then parsed into cited text and document location indices. The <code>cited_text</code> field is provided for convenience and does not count towards output tokens.</li>
<li>When passed back in subsequent conversation turns, <code>cited_text</code> is also not counted towards input tokens.</li>
</ul>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="feature-compatibility"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#feature-compatibility">​</a></div><span class="cursor-pointer">Feature compatibility</span></h3>
<p>Citations works in conjunction with other API features including <a class="link" href="/en/docs/build-with-claude/prompt-caching">prompt caching</a>, <a class="link" href="/en/docs/build-with-claude/token-counting">token counting</a> and <a class="link" href="/en/docs/build-with-claude/batch-processing">batch processing</a>.</p>
<h4 class="flex whitespace-pre-wrap group font-semibold" id="using-prompt-caching-with-citations"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#using-prompt-caching-with-citations">​</a></div><span class="cursor-pointer">Using Prompt Caching with Citations</span></h4>
<p>Citations and prompt caching can be used together effectively.</p>
<p>The citation blocks generated in responses cannot be cached directly, but the source documents they reference can be cached. To optimize performance, apply <code>cache_control</code> to your top-level document content blocks.</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Rliumpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:R15iumpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:R1liumpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R6iumpkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-python language-python"><code class="language-python"><span class=""><span class="token keyword">import</span> anthropic</span>
<!-- -->
<span class="">client <span class="token operator">=</span> anthropic<span class="token punctuation">.</span>Anthropic<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<!-- -->
<span class=""><span class="token comment"># Long document content (e.g., technical documentation)</span></span>
<span class="">long_document <span class="token operator">=</span> <span class="token string">"This is a very long document with thousands of words..."</span> <span class="token operator">+</span> <span class="token string">" ... "</span> <span class="token operator">*</span> <span class="token number">1000</span>  <span class="token comment"># Minimum cacheable length</span></span>
<!-- -->
<span class="">response <span class="token operator">=</span> client<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="">    model<span class="token operator">=</span><span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class="">    max_tokens<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">    messages<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="">                <span class="token punctuation">{</span></span>
<span class="">                    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">                    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">                        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">                        <span class="token string">"media_type"</span><span class="token punctuation">:</span> <span class="token string">"text/plain"</span><span class="token punctuation">,</span></span>
<span class="">                        <span class="token string">"data"</span><span class="token punctuation">:</span> long_document</span>
<span class="">                    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">                    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">                    <span class="token string">"cache_control"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"ephemeral"</span><span class="token punctuation">}</span>  <span class="token comment"># Cache the document content</span></span>
<span class="">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token punctuation">{</span></span>
<span class="">                    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">                    <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"What does this document say about API features?"</span></span>
<span class="">                <span class="token punctuation">}</span></span>
<span class="">            <span class="token punctuation">]</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">)</span></span>
</code></pre></div></div></div></div>
<p>In this example:</p>
<ul>
<li>The document content is cached using <code>cache_control</code> on the document block</li>
<li>Citations are enabled on the document</li>
<li>Claude can generate responses with citations while benefiting from cached document content</li>
<li>Subsequent requests using the same document will benefit from the cached content</li>
</ul>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="document-types"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#document-types">​</a></div><span class="cursor-pointer">Document Types</span></h2>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="choosing-a-document-type"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#choosing-a-document-type">​</a></div><span class="cursor-pointer">Choosing a document type</span></h3>
<p>We support three document types for citations. Documents can be provided directly in the message (base64, text, or URL) or uploaded via the <a class="link" href="/en/docs/build-with-claude/files">Files API</a> and referenced by <code>file_id</code>:</p>
<table><thead><tr><th style="text-align:left">Type</th><th style="text-align:left">Best for</th><th style="text-align:left">Chunking</th><th style="text-align:left">Citation format</th></tr></thead><tbody><tr><td style="text-align:left">Plain text</td><td style="text-align:left">Simple text documents, prose</td><td style="text-align:left">Sentence</td><td style="text-align:left">Character indices (0-indexed)</td></tr><tr><td style="text-align:left">PDF</td><td style="text-align:left">PDF files with text content</td><td style="text-align:left">Sentence</td><td style="text-align:left">Page numbers (1-indexed)</td></tr><tr><td style="text-align:left">Custom content</td><td style="text-align:left">Lists, transcripts, special formatting, more granular citations</td><td style="text-align:left">No additional chunking</td><td style="text-align:left">Block indices (0-indexed)</td></tr></tbody></table>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="plain-text-documents"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#plain-text-documents">​</a></div><span class="cursor-pointer">Plain text documents</span></h3>
<p>Plain text documents are automatically chunked into sentences. You can provide them inline or by reference with their <code>file_id</code>:</p>
<div class="tabs tabs tab-container" id="inline-text"><div class="prose dark:prose-dark overflow-x-auto" data-component-part="tab-content"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"media_type"</span><span class="token punctuation">:</span> <span class="token string">"text/plain"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token string">"Plain text content..."</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div class="hidden"><div><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"media_type"</span><span class="token punctuation">:</span> <span class="token string">"text/plain"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token string">"Plain text content..."</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"file_id"</span><span class="token punctuation">:</span> <span class="token string">"file_011CNvxoj286tYUAZFiZMf1U"</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div></div>
<div class="accordion border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock cursor-default" role="button"><button aria-controls="example-plain-text-citation accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl" data-component-part="accordion-button"><div class="leading-tight text-left" contenteditable="false" data-component-part="accordion-title-container"><p class="m-0 font-medium text-gray-900 dark:text-gray-200" data-component-part="accordion-title">Example plain text citation</p></div></button><div class="mt-2 mb-4 mx-6 hidden overflow-x-auto cursor-default" data-component-part="accordion-content" id="example-plain-text-citation accordion children" role="contentinfo"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"char_location"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"The exact text being cited"</span><span class="token punctuation">,</span> <span class="token comment"># not counted towards output tokens</span></span>
<span class="">    <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"document_title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"start_char_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token comment"># 0-indexed</span></span>
<span class="">    <span class="token string">"end_char_index"</span><span class="token punctuation">:</span> <span class="token number">50</span>      <span class="token comment"># exclusive</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="pdf-documents"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#pdf-documents">​</a></div><span class="cursor-pointer">PDF documents</span></h3>
<p>PDF documents can be provided as base64-encoded data or by <code>file_id</code>. PDF text is extracted and chunked into sentences. As image citations are not yet supported, PDFs that are scans of documents and do not contain extractable text will not be citable.</p>
<div class="tabs tabs tab-container" id="base64"><div class="prose dark:prose-dark overflow-x-auto" data-component-part="tab-content"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"base64"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"media_type"</span><span class="token punctuation">:</span> <span class="token string">"application/pdf"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"data"</span><span class="token punctuation">:</span> base64_encoded_pdf_data</span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div class="hidden"><div><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"base64"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"media_type"</span><span class="token punctuation">:</span> <span class="token string">"application/pdf"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"data"</span><span class="token punctuation">:</span> base64_encoded_pdf_data</span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"file_id"</span><span class="token punctuation">:</span> <span class="token string">"file_011CNvxoj286tYUAZFiZMf1U"</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div></div>
<div class="accordion border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock cursor-default" role="button"><button aria-controls="example-pdf-citation accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl" data-component-part="accordion-button"><div class="leading-tight text-left" contenteditable="false" data-component-part="accordion-title-container"><p class="m-0 font-medium text-gray-900 dark:text-gray-200" data-component-part="accordion-title">Example PDF citation</p></div></button><div class="mt-2 mb-4 mx-6 hidden overflow-x-auto cursor-default" data-component-part="accordion-content" id="example-pdf-citation accordion children" role="contentinfo"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"page_location"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"The exact text being cited"</span><span class="token punctuation">,</span> <span class="token comment"># not counted towards output tokens</span></span>
<span class="">    <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>     </span>
<span class="">    <span class="token string">"document_title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> </span>
<span class="">    <span class="token string">"start_page_number"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># 1-indexed</span></span>
<span class="">    <span class="token string">"end_page_number"</span><span class="token punctuation">:</span> <span class="token number">2</span>     <span class="token comment"># exclusive</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="custom-content-documents"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#custom-content-documents">​</a></div><span class="cursor-pointer">Custom content documents</span></h3>
<p>Custom content documents give you control over citation granularity. No additional chunking is done and chunks are provided to the model according to the content blocks provided.</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"source"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content"</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"First chunk"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"Second chunk"</span><span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">]</span></span>
<span class="">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"context"</span><span class="token punctuation">:</span> <span class="token string">"Context about the document that will not be cited from"</span><span class="token punctuation">,</span> <span class="token comment"># optional</span></span>
<span class="">    <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"enabled"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<div class="accordion border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock cursor-default" role="button"><button aria-controls="example-citation accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl" data-component-part="accordion-button"><div class="leading-tight text-left" contenteditable="false" data-component-part="accordion-title-container"><p class="m-0 font-medium text-gray-900 dark:text-gray-200" data-component-part="accordion-title">Example citation</p></div></button><div class="mt-2 mb-4 mx-6 hidden overflow-x-auto cursor-default" data-component-part="accordion-content" id="example-citation accordion children" role="contentinfo"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content_block_location"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"The exact text being cited"</span><span class="token punctuation">,</span> <span class="token comment"># not counted towards output tokens</span></span>
<span class="">    <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"document_title"</span><span class="token punctuation">:</span> <span class="token string">"Document Title"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token string">"start_block_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token comment"># 0-indexed</span></span>
<span class="">    <span class="token string">"end_block_index"</span><span class="token punctuation">:</span> <span class="token number">1</span>      <span class="token comment"># exclusive</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div>

<h2 class="flex whitespace-pre-wrap group font-semibold" id="response-structure"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#response-structure">​</a></div><span class="cursor-pointer">Response Structure</span></h2>
<p>When citations are enabled, responses include multiple text blocks with citations:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-json"><code class="language-python"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"According to the document, "</span></span>
<span class="">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"the grass is green"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="">                <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"char_location"</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"The grass is green."</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"document_title"</span><span class="token punctuation">:</span> <span class="token string">"Example Document"</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"start_char_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"end_char_index"</span><span class="token punctuation">:</span> <span class="token number">20</span></span>
<span class="">            <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">" and "</span></span>
<span class="">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"the sky is blue"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token string">"citations"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="">                <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"char_location"</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"The sky is blue."</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"document_title"</span><span class="token punctuation">:</span> <span class="token string">"Example Document"</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"start_char_index"</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span></span>
<span class="">                <span class="token string">"end_char_index"</span><span class="token punctuation">:</span> <span class="token number">36</span></span>
<span class="">            <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="streaming-support"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#streaming-support">​</a></div><span class="cursor-pointer">Streaming Support</span></h3>
<p>For streaming responses, we’ve added a <code>citations_delta</code> type that contains a single citation to be added to the <code>citations</code> list on the current <code>text</code> content block.</p>
<div class="accordion-group [&amp;&gt;div]:border-0 [&amp;&gt;div]:rounded-none [&amp;&gt;div&gt;button]:rounded-none [&amp;&gt;div]:mb-0 overflow-hidden mt-0 mb-3 rounded-xl prose prose-gray dark:prose-invert divide-y divide-inherit border dark:border-gray-800/50"><div class="accordion border-standard rounded-2xl mb-3 overflow-hidden bg-background-light dark:bg-codeblock cursor-default" role="button"><button aria-controls="example-streaming-events accordion children" aria-expanded="false" class="relative not-prose flex flex-row items-center content-center w-full py-4 px-5 space-x-2 hover:bg-gray-100 hover:dark:bg-gray-800 rounded-t-xl" data-component-part="accordion-button"><div class="leading-tight text-left" contenteditable="false" data-component-part="accordion-title-container"><p class="m-0 font-medium text-gray-900 dark:text-gray-200" data-component-part="accordion-title">Example streaming events</p></div></button><div class="mt-2 mb-4 mx-6 hidden overflow-x-auto cursor-default" data-component-part="accordion-content" id="example-streaming-events accordion children" role="contentinfo"><div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python"><code class="language-python"><span class="">event<span class="token punctuation">:</span> message_start</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"message_start"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token punctuation">:</span> content_block_start</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content_block_start"</span><span class="token punctuation">,</span> <span class="token string">"index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token punctuation">:</span> content_block_delta</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token string">"index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> </span>
<span class="">       <span class="token string">"delta"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"text_delta"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"According to..."</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token punctuation">:</span> content_block_delta</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token string">"index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">       <span class="token string">"delta"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"citations_delta"</span><span class="token punctuation">,</span> </span>
<span class="">                 <span class="token string">"citation"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="">                     <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"char_location"</span><span class="token punctuation">,</span></span>
<span class="">                     <span class="token string">"cited_text"</span><span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span></span>
<span class="">                     <span class="token string">"document_index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="">                     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="">                 <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token punctuation">:</span> content_block_stop</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"content_block_stop"</span><span class="token punctuation">,</span> <span class="token string">"index"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token punctuation">:</span> message_stop</span>
<span class="">data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"message_stop"</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div></div></div></div><div class="leading-6 mt-14"><div class="feedback-toolbar pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200" id="pagination"><a class="flex items-center space-x-3 group" href="/en/docs/build-with-claude/batch-processing"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Batch processing</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/docs/build-with-claude/multilingual-support"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Multilingual support</span></a></div></div></div><div class="hidden xl:flex self-start sticky xl:flex-col h-[calc(100vh-9.5rem)] top-[9.5rem]" id="content-side-layout"><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem] max-h-full" id="table-of-contents-layout"><div class="text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 pb-4 -mt-10 pt-10" id="table-of-contents"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div></div></div></div></div></div></div></div></main>