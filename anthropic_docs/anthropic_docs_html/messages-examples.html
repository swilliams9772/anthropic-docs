<main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="max-w-8xl px-4 mx-auto lg:px-8"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem]" id="sidebar" style="top:7rem"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-semibold text-primary dark:text-primary-light" href="/en/home">Documentation</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">SDKs</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/client-sdks"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/client-sdks" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Client SDKs</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/openai-sdk"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/openai-sdk" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>OpenAI SDK compatibility (beta)</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Examples</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/messages-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/api/messages-examples" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Messages examples</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/api/messages-batch-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-batch-examples" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Message Batches examples</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="mdx-content relative mt-8 prose prose-gray dark:prose-invert"><p>See the <a class="link" href="/en/api/messages">API reference</a> for full documentation on available parameters.</p>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="basic-request-and-response"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#basic-request-and-response">​</a></div><span class="cursor-pointer">Basic request and response</span></h2>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Raoampkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rioampkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rqoampkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R38ampkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token shebang important">#!/bin/sh</span></span>
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01XFDUDYJgAACzvnptvVoYEL"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">6</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="multiple-conversational-turns"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#multiple-conversational-turns">​</a></div><span class="cursor-pointer">Multiple conversational turns</span></h2>
<p>The Messages API is stateless, which means that you always send the full conversational history to the API. You can use this pattern to build up a conversation over time. Earlier conversational turns don’t necessarily need to actually originate from Claude — you can use synthetic <code>assistant</code> messages.</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Shell</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token shebang important">#!/bin/sh</span></span>
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span>,</span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"assistant"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span>,</span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Python</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python language-python"><code class="language-Python"><span class=""><span class="token keyword">import</span> anthropic</span>
<!-- -->
<span class="">message <span class="token operator">=</span> anthropic<span class="token punctuation">.</span>Anthropic<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>messages<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="">    model<span class="token operator">=</span><span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class="">    max_tokens<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">    messages<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class=""><span class="token punctuation">)</span></span>
<span class=""><span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
<!-- -->
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">TypeScript</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-typescript language-python"><code class="language-TypeScript"><span class=""><span class="token keyword">import</span> Anthropic <span class="token keyword">from</span> <span class="token string">'@anthropic-ai/sdk'</span><span class="token punctuation">;</span></span>
<!-- -->
<span class=""><span class="token keyword">const</span> anthropic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Anthropic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<!-- -->
<span class=""><span class="token keyword">await</span> anthropic<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="">  model<span class="token operator">:</span> <span class="token string">'claude-opus-4-20250514'</span><span class="token punctuation">,</span></span>
<span class="">  max_tokens<span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">  messages<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_018gCsTGsXkYJVqYPxTgDHBU"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Sure, I'd be happy to provide..."</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">309</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="putting-words-in-claude%E2%80%99s-mouth"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#putting-words-in-claude%E2%80%99s-mouth">​</a></div><span class="cursor-pointer">Putting words in Claude’s mouth</span></h2>
<p>You can pre-fill part of Claude’s response in the last position of the input messages list. This can be used to shape Claude’s response. The example below uses <code>"max_tokens": 1</code> to get a single multiple choice answer from Claude.</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Rapimpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Ripimpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rqpimpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R39impkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token shebang important">#!/bin/sh</span></span>
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"What is latin for Ant? (A) Apoidea, (B) Rhopalocera, (C) Formicidae"</span><span class="token punctuation">}</span>,</span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"assistant"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"The answer is ("</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01Q8Faay6S7QPTvEUUQARt7h"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"C"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"max_tokens"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="vision"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#vision">​</a></div><span class="cursor-pointer">Vision</span></h2>
<p>Claude can read both text and images in requests. We support both <code>base64</code> and <code>url</code> source types for images, and the <code>image/jpeg</code>, <code>image/png</code>, <code>image/gif</code>, and <code>image/webp</code> media types. See our <a class="link" href="/en/docs/vision">vision guide</a> for more details.</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Raq2mpkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Shell</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Riq2mpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:Rqq2mpkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R3a2mpkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token shebang important">#!/bin/sh</span></span>
<!-- -->
<span class=""><span class="token comment"># Option 1: Base64-encoded image</span></span>
<span class=""><span class="token assign-left variable">IMAGE_URL</span><span class="token operator">=</span><span class="token string">"https://upload.wikimedia.org/wikipedia/commons/a/a7/Camponotus_flavomarginatus_ant.jpg"</span></span>
<span class=""><span class="token assign-left variable">IMAGE_MEDIA_TYPE</span><span class="token operator">=</span><span class="token string">"image/jpeg"</span></span>
<span class=""><span class="token assign-left variable">IMAGE_BASE64</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token string">"<span class="token variable">$IMAGE_URL</span>"</span> <span class="token operator">|</span> base64<span class="token variable">)</span></span></span>
<!-- -->
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"image"</span>, <span class="token string">"source"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">                <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"base64"</span>,</span>
<span class="">                <span class="token string">"media_type"</span><span class="token builtin class-name">:</span> <span class="token string">"'<span class="token variable">$IMAGE_MEDIA_TYPE</span>'"</span>,</span>
<span class="">                <span class="token string">"data"</span><span class="token builtin class-name">:</span> <span class="token string">"'<span class="token variable">$IMAGE_BASE64</span>'"</span></span>
<span class="">            <span class="token punctuation">}</span><span class="token punctuation">}</span>,</span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"text"</span>, <span class="token string">"text"</span><span class="token builtin class-name">:</span> <span class="token string">"What is in the above image?"</span><span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
<!-- -->
<span class=""><span class="token comment"># Option 2: URL-referenced image</span></span>
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"image"</span>, <span class="token string">"source"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">                <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"url"</span>,</span>
<span class="">                <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"https://upload.wikimedia.org/wikipedia/commons/a/a7/Camponotus_flavomarginatus_ant.jpg"</span></span>
<span class="">            <span class="token punctuation">}</span><span class="token punctuation">}</span>,</span>
<span class="">            <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"text"</span>, <span class="token string">"text"</span><span class="token builtin class-name">:</span> <span class="token string">"What is in the above image?"</span><span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01EcyWo6m4hyW8KHs2y2pei5"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"This image shows an ant, specifically a close-up view of an ant. The ant is shown in detail, with its distinct head, antennae, and legs clearly visible. The image is focused on capturing the intricate details and features of the ant, likely taken with a macro lens to get an extreme close-up perspective."</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">1551</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">71</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="tool-use%2C-json-mode%2C-and-computer-use-beta"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#tool-use%2C-json-mode%2C-and-computer-use-beta">​</a></div><span class="cursor-pointer">Tool use, JSON mode, and computer use (beta)</span></h2>
<p>See our <a class="link" href="/en/docs/build-with-claude/tool-use">guide</a> for examples for how to use tools with the Messages API.
See our <a class="link" href="/en/docs/build-with-claude/computer-use">computer use (beta) guide</a> for examples of how to control desktop computer environments with the Messages API.</p></div><div class="leading-6 mt-14"><div class="feedback-toolbar pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200" id="pagination"><a class="flex items-center space-x-3 group" href="/en/api/openai-sdk"><span class="group-hover:text-gray-900 dark:group-hover:text-white">OpenAI SDK compatibility (beta)</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/api/messages-batch-examples"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Message Batches examples</span></a></div></div></div><div class="hidden xl:flex self-start sticky xl:flex-col h-[calc(100vh-9.5rem)] top-[9.5rem]" id="content-side-layout"><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem] max-h-full" id="table-of-contents-layout"><div class="text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 pb-4 -mt-10 pt-10" id="table-of-contents"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div></div></div></div></div></div></div></div></main>