<main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="z-30 fixed lg:sticky top-0 w-full" id="navbar"><div class="max-w-8xl mx-auto relative"><div class=""><div class="relative"><div class="flex items-center lg:px-12 h-16 min-w-0 mx-4 lg:mx-0"><div class="h-full relative flex-1 flex items-center gap-x-4 min-w-0 border-b border-gray-500/5 dark:border-gray-300/[0.06]"><div class="flex-1 flex items-center gap-x-4"><a href="/"><span class="sr-only">Anthropic<!-- --> home page</span></a><div class="flex items-center gap-x-2"><button aria-expanded="false" aria-haspopup="menu" class="group bg-background-light dark:bg-background-dark disabled:pointer-events-none [&amp;&gt;span]:line-clamp-1 overflow-hidden group outline-none group-hover:text-zinc-950/70 dark:group-hover:text-white/70 text-xs gap-1.5 text-gray-500 dark:text-gray-400 leading-5 font-semibold border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 rounded-full py-1 px-3 flex items-center space-x-2 whitespace-nowrap" data-state="closed" id="radix-:R25fcql6:" type="button">English</button></div></div><div class="hidden lg:block mx-px relative flex-1 bg-white dark:bg-gray-900 pointer-events-auto rounded-xl min-w-0"><button class="w-full flex items-center text-sm leading-6 rounded-xl py-1.5 pl-3.5 pr-3 shadow-sm text-gray-400 dark:text-white/50 bg-background-light dark:bg-background-dark dark:brightness-[1.1] dark:ring-1 dark:hover:brightness-[1.25] ring-1 ring-gray-400/20 hover:ring-gray-600/25 dark:ring-gray-600/30 dark:hover:ring-gray-500/30 focus:outline-primary justify-between truncate gap-2 min-w-[43px]" id="search-bar-entry" type="button"><div class="flex items-center gap-3 min-w-[42px]"><div class="truncate min-w-0">Search...</div></div></button></div><div class="flex lg:hidden items-center gap-2"><button class="text-gray-500 w-8 h-8 flex items-center justify-center hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" id="search-bar-entry-mobile" type="button"><span class="sr-only">Search...</span></button></div></div></div><div class="flex items-center h-14 py-4 px-5 lg:hidden"><button class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300" type="button"><span class="sr-only">Navigation</span></button><div class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0 space-x-3"><div class="flex items-center space-x-3"><span>Messages</span></div><div class="font-semibold text-gray-900 truncate dark:text-gray-200">Messages examples</div></div></div></div><div class="hidden lg:flex px-12 h-12"><div class="h-full flex text-sm space-x-6"><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/home">Welcome</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/docs/welcome">User Guides</a><a class="group relative h-full flex items-center text-gray-800 dark:text-gray-200 font-semibold" href="/en/api/getting-started">API Reference</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/prompt-library/library">Prompt Library</a><a class="group relative h-full flex items-center font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300" href="/en/release-notes/overview">Release Notes</a></div></div></div></div></div><div class="max-w-8xl px-4 mx-auto lg:px-8 min-h-screen"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem] top-[7.1rem]" id="sidebar"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Using the API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-started"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-started" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting started</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/ip-addresses"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/ip-addresses" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>IP addresses</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/versioning"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/versioning" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Versions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/errors"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/errors" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Errors</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/rate-limits"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/rate-limits" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Rate limits</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/client-sdks"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/client-sdks" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Client SDKs</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/supported-regions"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/supported-regions" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Supported regions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/getting-help"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/getting-help" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Getting help</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Anthropic APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Messages</div></div><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Messages</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-count-tokens"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-count-tokens" style="padding-left:1.75rem"><span class="w-8 flex items-center"><span class="px-1 py-0.5 rounded-md text-[0.55rem] leading-tight font-bold bg-blue-400/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400">POST</span></span><div class="flex-1 flex items-center space-x-2.5"><div>Count Message tokens</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-streaming"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/messages-streaming" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Streaming Messages</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/migrating-from-text-completions-to-messages"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/migrating-from-text-completions-to-messages" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Migrating from Text Completions</div></div></a></li><li class="scroll-m-4 first:scroll-m-20" id="/en/api/messages-examples"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/api/messages-examples" style="padding-left:1.75rem"><div class="flex-1 flex items-center space-x-2.5"><div>Messages examples</div></div></a></li></ul></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Models</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Message Batches</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Text Completions (Legacy)</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Admin API</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">OpenAI SDK compatibility</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/openai-sdk"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/openai-sdk" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>OpenAI SDK compatibility (beta)</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Experimental APIs</h5><ul><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div>Prompt tools</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Amazon Bedrock API</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-amazon-bedrock"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-amazon-bedrock" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Amazon Bedrock API</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200">Vertex AI</h5><ul><li class="scroll-m-4 first:scroll-m-20" id="/en/api/claude-on-vertex-ai"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light space-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/api/claude-on-vertex-ai" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vertex AI API</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="relative mt-8 prose prose-gray dark:prose-invert"><p>See the <a href="/en/api/messages">API reference</a> for full documentation on available parameters.</p>
<h2 class="flex whitespace-pre-wrap group" id="basic-request-and-response"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#basic-request-and-response">​</a></div><span class="cursor-pointer">Basic request and response</span></h2>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01XFDUDYJgAACzvnptvVoYEL"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">6</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="multiple-conversational-turns"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#multiple-conversational-turns">​</a></div><span class="cursor-pointer">Multiple conversational turns</span></h2>
<p>The Messages API is stateless, which means that you always send the full conversational history to the API. You can use this pattern to build up a conversation over time. Earlier conversational turns don’t necessarily need to actually originate from Claude — you can use synthetic <code>assistant</code> messages.</p>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">Shell</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash"><code class="language-bash"><span class=""><span class="token shebang important">#!/bin/sh</span></span>
<span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span>,</span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"assistant"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span>,</span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">Python</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-python"><code class="language-Python"><span class=""><span class="token keyword">import</span> anthropic</span>
<!-- -->
<span class="">message <span class="token operator">=</span> anthropic<span class="token punctuation">.</span>Anthropic<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>messages<span class="token punctuation">.</span>create<span class="token punctuation">(</span></span>
<span class="">    model<span class="token operator">=</span><span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">    max_tokens<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">    messages<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">        <span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class=""><span class="token punctuation">)</span></span>
<span class=""><span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span></span>
<!-- -->
</code></pre></div></div></div>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">TypeScript</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-typescript"><code class="language-TypeScript"><span class=""><span class="token keyword">import</span> Anthropic <span class="token keyword">from</span> <span class="token string">'@anthropic-ai/sdk'</span><span class="token punctuation">;</span></span>
<!-- -->
<span class=""><span class="token keyword">const</span> anthropic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Anthropic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<!-- -->
<span class=""><span class="token keyword">await</span> anthropic<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="">  model<span class="token operator">:</span> <span class="token string">'claude-3-7-sonnet-20250219'</span><span class="token punctuation">,</span></span>
<span class="">  max_tokens<span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">  messages<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello, Claude"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token punctuation">{</span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Can you describe LLMs to me?"</span><span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
</code></pre></div></div></div>
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_018gCsTGsXkYJVqYPxTgDHBU"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Sure, I'd be happy to provide..."</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">309</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="putting-words-in-claudes-mouth"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#putting-words-in-claudes-mouth">​</a></div><span class="cursor-pointer">Putting words in Claude’s mouth</span></h2>
<p>You can pre-fill part of Claude’s response in the last position of the input messages list. This can be used to shape Claude’s response. The example below uses <code>"max_tokens": 1</code> to get a single multiple choice answer from Claude.</p>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01Q8Faay6S7QPTvEUUQARt7h"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"C"</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"max_tokens"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="vision"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#vision">​</a></div><span class="cursor-pointer">Vision</span></h2>
<p>Claude can read both text and images in requests. We support both <code>base64</code> and <code>url</code> source types for images, and the <code>image/jpeg</code>, <code>image/png</code>, <code>image/gif</code>, and <code>image/webp</code> media types. See our <a href="/en/docs/vision">vision guide</a> for more details.</p>
<!-- -->
<div class="mt-5 mb-8 not-prose rounded-2xl relative text-gray-50 bg-[#0F1117] dark:bg-codeblock dark:ring-1 dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light">JSON</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class=""><span class="token punctuation">{</span></span>
<span class="">  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01EcyWo6m4hyW8KHs2y2pei5"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="">    <span class="token punctuation">{</span></span>
<span class="">      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span></span>
<span class="">      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"This image shows an ant, specifically a close-up view of an ant. The ant is shown in detail, with its distinct head, antennae, and legs clearly visible. The image is focused on capturing the intricate details and features of the ant, likely taken with a macro lens to get an extreme close-up perspective."</span></span>
<span class="">    <span class="token punctuation">}</span></span>
<span class="">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="">  <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="">    <span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">1551</span><span class="token punctuation">,</span></span>
<span class="">    <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">71</span></span>
<span class="">  <span class="token punctuation">}</span></span>
<span class=""><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group" id="tool-use-json-mode-and-computer-use-beta"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#tool-use-json-mode-and-computer-use-beta">​</a></div><span class="cursor-pointer">Tool use, JSON mode, and computer use (beta)</span></h2>
<p>See our <a href="/en/docs/build-with-claude/tool-use">guide</a> for examples for how to use tools with the Messages API.
See our <a href="/en/docs/build-with-claude/computer-use">computer use (beta) guide</a> for examples of how to control desktop computer environments with the Messages API.</p></div><div class="leading-6 mt-14"><div class="pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-400 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200"><a class="flex items-center space-x-3 group" href="/en/api/migrating-from-text-completions-to-messages"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Migrating from Text Completions</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/api/models-list"><span class="group-hover:text-gray-900 dark:group-hover:text-white">List Models</span></a></div></div></div><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem]" id="table-of-contents"><div class="fixed text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 h-[calc(100%-10rem)]" id="table-of-contents-content"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div><ul><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#basic-request-and-response">Basic request and response</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#multiple-conversational-turns">Multiple conversational turns</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#putting-words-in-claudes-mouth">Putting words in Claude’s mouth</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#vision">Vision</a></li><li><a class="py-1 block hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="#tool-use-json-mode-and-computer-use-beta">Tool use, JSON mode, and computer use (beta)</a></li></ul></div></div></div></div></div></div></main>