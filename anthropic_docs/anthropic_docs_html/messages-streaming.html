<main class="jsx-4145347147"><div class="relative antialiased text-gray-500 dark:text-gray-400"><div class="max-w-8xl px-4 mx-auto lg:px-8"><div class="z-20 hidden lg:block fixed bottom-0 right-auto w-[18rem]" id="sidebar" style="top:7rem"><div class="absolute inset-0 z-10 stable-scrollbar-gutter overflow-auto pr-8 pb-10" id="sidebar-content"><div class="relative lg:text-sm lg:leading-6"><div id="navigation-items"><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-semibold text-primary dark:text-primary-light" href="/en/home">Documentation</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://console.anthropic.com/" rel="noreferrer" target="_blank">Developer Console</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/discord" rel="noreferrer" target="_blank">Developer Discord</a></li><li class="list-none"><a class="link nav-anchor pl-4 group flex items-center lg:text-sm lg:leading-6 mb-5 sm:mb-4 font-medium text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://support.anthropic.com/" rel="noreferrer" target="_blank">Support</a></li><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">First steps</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/welcome"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/welcome" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Intro to Claude</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/get-started"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/get-started" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Get started</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Models &amp; pricing</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Models overview</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/choosing-a-model"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/choosing-a-model" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Choosing a model</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/models/migrating-to-claude-4"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/models/migrating-to-claude-4" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Migrating to Claude 4</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/model-deprecations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/model-deprecations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Model deprecations</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/pricing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/pricing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Pricing</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Learn about Claude</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Building with Claude</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Use cases</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/context-windows"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/context-windows" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Context windows</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/about-claude/glossary"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/about-claude/glossary" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Glossary</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Prompt engineering</div></div></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Explore features</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/overview"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/overview" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Features overview</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/prompt-caching"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/prompt-caching" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Prompt caching</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/extended-thinking"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/extended-thinking" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Extended thinking</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/streaming"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl bg-primary/10 text-primary font-semibold dark:text-primary-light dark:bg-primary-light/10" href="/en/docs/build-with-claude/streaming" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Streaming Messages</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/batch-processing"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/batch-processing" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Batch processing</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/citations"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/citations" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Citations</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/multilingual-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/multilingual-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Multilingual support</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/token-counting"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/token-counting" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Token counting</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/embeddings"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/embeddings" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Embeddings</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/vision"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/vision" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Vision</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/build-with-claude/pdf-support"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/build-with-claude/pdf-support" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>PDF support</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Agent components</h5><ul id="sidebar-group"><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Tools</div></div></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Model Context Protocol (MCP)</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/computer-use"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/computer-use" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Computer use (beta)</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/agents-and-tools/claude-for-sheets"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/agents-and-tools/claude-for-sheets" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Google Sheets add-on</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Test &amp; evaluate</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/define-success"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/define-success" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Define success criteria</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/develop-tests"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/develop-tests" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Develop test cases</div></div></a></li><li><div class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" style="padding-left:1rem"><div class="">Strengthen guardrails</div></div></li><li class="relative scroll-m-4 first:scroll-m-20" id="/en/docs/test-and-evaluate/eval-tool"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="/en/docs/test-and-evaluate/eval-tool" style="padding-left:1rem"><div class="flex-1 flex items-center space-x-2.5"><div>Using the Evaluation Tool</div></div></a></li></ul></div><div class="mt-12 lg:mt-8"><h5 class="pl-4 mb-3.5 lg:mb-2.5 font-semibold text-gray-900 dark:text-gray-200" id="sidebar-title">Legal center</h5><ul id="sidebar-group"><li class="relative scroll-m-4 first:scroll-m-20" id="https://www.anthropic.com/legal/privacy"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://www.anthropic.com/legal/privacy" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Anthropic Privacy Policy</div></div></a></li><li class="relative scroll-m-4 first:scroll-m-20" id="https://trust.anthropic.com/"><a class="group mt-2 lg:mt-0 flex items-center pr-3 py-1.5 cursor-pointer focus:outline-primary dark:focus:outline-primary-light gap-x-3 rounded-xl hover:bg-gray-600/5 dark:hover:bg-gray-200/5 text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300" href="https://trust.anthropic.com/" style="padding-left:1rem" target="_blank"><div class="flex-1 flex items-center space-x-2.5"><div>Security and compliance</div></div></a></li></ul></div></div></div></div></div><div class="" id="content-container"><div class="flex flex-row gap-12 box-border w-full pt-40 lg:pt-10"><div class="relative grow box-border flex-col w-full mx-auto px-1 lg:pl-[23.7rem] lg:-ml-12 xl:w-[calc(100%-28rem)]" id="content-area"><div class="mdx-content relative mt-8 prose prose-gray dark:prose-invert"><p>When creating a Message, you can set <code>"stream": true</code> to incrementally stream the response using <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent%5Fevents/Using%5Fserver-sent%5Fevents" rel="noreferrer" target="_blank">server-sent events</a> (SSE).</p>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="streaming-with-sdks"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#streaming-with-sdks">​</a></div><span class="cursor-pointer">Streaming with SDKs</span></h2>
<p>Our <a class="link" href="https://github.com/anthropics/anthropic-sdk-python" rel="noreferrer" target="_blank">Python</a> and <a class="link" href="https://github.com/anthropics/anthropic-sdk-typescript" rel="noreferrer" target="_blank">TypeScript</a> SDKs offer multiple ways of streaming. The Python SDK allows both sync and async streams. See the documentation in each SDK for details.</p>
<div class="code-group mt-5 mb-8 flex flex-col not-prose relative overflow-hidden rounded-2xl dark:border-gray-800/50 bg-[#0F1117] border border-transparent dark:bg-codeblock text-gray-50 codeblock-dark" id="code-group"><div class="relative border-b border-gray-900/80 bg-[#0F1117] dark:bg-codeblock" data-component-part="code-group-tab-bar"><div aria-orientation="horizontal" class="text-xs leading-6 rounded-t-xl flex overflow-x-auto overflow-y-hidden mr-12 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25" role="tablist"><button aria-selected="true" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-primary-light" data-headlessui-state="selected" id="headlessui-tabs-tab-:Rlgempkql6:" role="tab" tabindex="0" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">Python</div></button><button aria-selected="false" class="group flex items-center relative px-2 pt-2.5 pb-2 outline-none whitespace-nowrap font-medium text-gray-400" data-headlessui-state="" id="headlessui-tabs-tab-:R15gempkql6:" role="tab" tabindex="-1" type="button"><div class="px-2 rounded-lg z-10 group-hover:bg-gray-700/70 group-hover:text-primary-light">TypeScript</div></button></div></div><div class="flex flex-1 overflow-hidden"><div class="relative min-w-full w-full transition-[height] duration-300 ease-in-out" data-headlessui-state="selected" id="headlessui-tabs-panel-:R6gempkql6:" role="tabpanel" style="font-variant-ligatures:none;height:auto" tabindex="0"><div class="flex-none p-5 overflow-x-auto text-sm h-full scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25 leading-6" data-component-part="code-group-tab-content"><pre class="language-python language-python"><code class="language-Python"><span class=""><span class="token keyword">import</span> anthropic</span>
<!-- -->
<span class="">client <span class="token operator">=</span> anthropic<span class="token punctuation">.</span>Anthropic<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<!-- -->
<span class=""><span class="token keyword">with</span> client<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>stream<span class="token punctuation">(</span></span>
<span class="">    max_tokens<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="">    messages<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token string">"Hello"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="">    model<span class="token operator">=</span><span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span></span>
<span class=""><span class="token punctuation">)</span> <span class="token keyword">as</span> stream<span class="token punctuation">:</span></span>
<span class="">  <span class="token keyword">for</span> text <span class="token keyword">in</span> stream<span class="token punctuation">.</span>text_stream<span class="token punctuation">:</span></span>
<span class="">      <span class="token keyword">print</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
</code></pre></div></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="event-types"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#event-types">​</a></div><span class="cursor-pointer">Event types</span></h2>
<p>Each server-sent event includes a named event type and associated JSON data. Each event will use an SSE event name (e.g. <code>event: message_stop</code>), and include the matching event <code>type</code> in its data.</p>
<p>Each stream uses the following event flow:</p>
<ol>
<li><code>message_start</code>: contains a <code>Message</code> object with empty <code>content</code>.</li>
<li>A series of content blocks, each of which have a <code>content_block_start</code>, one or more <code>content_block_delta</code> events, and a <code>content_block_stop</code> event. Each content block will have an <code>index</code> that corresponds to its index in the final Message <code>content</code> array.</li>
<li>One or more <code>message_delta</code> events, indicating top-level changes to the final <code>Message</code> object.</li>
<li>A final <code>message_stop</code> event.</li>
</ol>
<div class="callout my-4 px-5 py-4 overflow-hidden rounded-2xl flex gap-3 border border-amber-500/20 bg-amber-50/50 dark:border-amber-500/30 dark:bg-amber-500/10" data-callout-type="warning"><div class="text-sm prose min-w-0 w-full text-amber-900 dark:text-amber-200" data-component-part="callout-content"><p>The token counts shown in the <code>usage</code> field of the <code>message_delta</code> event are <em>cumulative</em>.</p></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="ping-events"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#ping-events">​</a></div><span class="cursor-pointer">Ping events</span></h3>
<p>Event streams may also include any number of <code>ping</code> events.</p>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="error-events"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#error-events">​</a></div><span class="cursor-pointer">Error events</span></h3>
<p>We may occasionally send <a class="link" href="/en/api/errors">errors</a> in the event stream. For example, during periods of high usage, you may receive an <code>overloaded_error</code>, which would normally correspond to an HTTP 529 in a non-streaming context:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Example error</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-json"><span class="">event<span class="token operator">:</span> error</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"overloaded_error"</span><span class="token punctuation">,</span> <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Overloaded"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="other-events"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#other-events">​</a></div><span class="cursor-pointer">Other events</span></h3>
<p>In accordance with our <a class="link" href="/en/api/versioning">versioning policy</a>, we may add new event types, and your code should handle unknown event types gracefully.</p>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="content-block-delta-types"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#content-block-delta-types">​</a></div><span class="cursor-pointer">Content block delta types</span></h2>
<p>Each <code>content_block_delta</code> event contains a <code>delta</code> of a type that updates the <code>content</code> block at a given <code>index</code>.</p>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="text-delta"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#text-delta">​</a></div><span class="cursor-pointer">Text delta</span></h3>
<p>A <code>text</code> content block delta looks like:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Text delta</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text_delta"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"ello frien"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="input-json-delta"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#input-json-delta">​</a></div><span class="cursor-pointer">Input JSON delta</span></h3>
<p>The deltas for <code>tool_use</code> content blocks correspond to updates for the <code>input</code> field of the block. To support maximum granularity, the deltas are <em>partial JSON strings</em>, whereas the final <code>tool_use.input</code> is always an <em>object</em>.</p>
<p>You can accumulate the string deltas and parse the JSON once you receive a <code>content_block_stop</code> event, by using a library like <a class="link" href="https://docs.pydantic.dev/latest/concepts/json/#partial-json-parsing" rel="noreferrer" target="_blank">Pydantic</a> to do partial JSON parsing, or by using our <a class="link" href="https://docs.anthropic.com/en/api/client-sdks" rel="noreferrer" target="_blank">SDKs</a>, which provide helpers to access parsed incremental values.</p>
<p>A <code>tool_use</code> content block delta looks like:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Input JSON delta</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span> <span class="token string">"{\"location\": \"San Fra"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<p>Note: Our current models only support emitting one complete key and value property from <code>input</code> at a time. As such, when using tools, there may be delays between streaming events while the model is working. Once an <code>input</code> key and value are accumulated, we emit them as multiple <code>content_block_delta</code> events with chunked partial json so that the format can automatically support finer granularity in future models.</p>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="thinking-delta"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#thinking-delta">​</a></div><span class="cursor-pointer">Thinking delta</span></h3>
<p>When using <a class="link" href="/en/docs/build-with-claude/extended-thinking#streaming-extended-thinking">extended thinking</a> with streaming enabled, you’ll receive thinking content via <code>thinking_delta</code> events. These deltas correspond to the <code>thinking</code> field of the <code>thinking</code> content blocks.</p>
<p>For thinking content, a special <code>signature_delta</code> event is sent just before the <code>content_block_stop</code> event. This signature is used to verify the integrity of the thinking block.</p>
<p>A typical thinking delta looks like:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Thinking delta</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"Let me solve this step by step:\n\n1. First break down 27 * 453"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<p>The signature delta looks like:</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Signature delta</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-JSON"><span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"signature_delta"</span><span class="token punctuation">,</span> <span class="token property">"signature"</span><span class="token operator">:</span> <span class="token string">"EqQBCgIYAhIM1gbcDa9GJwZA2b3hGgxBdjrkzLoky3dl1pkiMOYds..."</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h2 class="flex whitespace-pre-wrap group font-semibold" id="full-http-stream-response"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#full-http-stream-response">​</a></div><span class="cursor-pointer">Full HTTP Stream response</span></h2>
<p>We strongly recommend that use our <a class="link" href="/en/api/client-sdks">client SDKs</a> when using streaming mode. However, if you are building a direct API integration, you will need to handle these events yourself.</p>
<p>A stream response is comprised of:</p>
<ol>
<li>A <code>message_start</code> event</li>
<li>Potentially multiple content blocks, each of which contains:<!-- -->
<ul>
<li>A <code>content_block_start</code> event</li>
<li>Potentially multiple <code>content_block_delta</code> events</li>
<li>A <code>content_block_stop</code> event</li>
</ul>
</li>
<li>A <code>message_delta</code> event</li>
<li>A <code>message_stop</code> event</li>
</ol>
<p>There may be <code>ping</code> events dispersed throughout the response as well. See <a class="link" href="/_sites/docs.anthropic.com/en/docs/build-with-claude/streaming#event-types">Event types</a> for more details on the format.</p>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="basic-streaming-request"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#basic-streaming-request">​</a></div><span class="cursor-pointer">Basic streaming request</span></h3>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Shell</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">  <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">  <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>, <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"Hello"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,</span>
<span class="">  <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">256</span>,</span>
<span class="">  <span class="token string">"stream"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Response</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-json"><span class="">event<span class="token operator">:</span> message_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_start"</span><span class="token punctuation">,</span> <span class="token property">"message"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_1nZdL29xx5MUA1yADyHTEsnR8uuvGzszyY"</span><span class="token punctuation">,</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span> <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"input_tokens"</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_start"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"content_block"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> ping</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ping"</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text_delta"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Hello"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text_delta"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"!"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_stop"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_delta"</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span> <span class="token property">"stop_sequence"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"output_tokens"</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_stop"</span><span class="token punctuation">}</span></span>
<!-- -->
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="streaming-request-with-tool-use"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#streaming-request-with-tool-use">​</a></div><span class="cursor-pointer">Streaming request with tool use</span></h3>
<p>In this request, we ask Claude to use a tool to tell us the weather.</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Shell</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash language-bash"><code class="language-bash"><span class="">  <span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">    <span class="token parameter variable">-H</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">    <span class="token parameter variable">-H</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">    <span class="token parameter variable">-H</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">    <span class="token parameter variable">-d</span> '<span class="token punctuation">{</span></span>
<span class="">      <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">      <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">1024</span>,</span>
<span class="">      <span class="token string">"tools"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">          <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"get_weather"</span>,</span>
<span class="">          <span class="token string">"description"</span><span class="token builtin class-name">:</span> <span class="token string">"Get the current weather in a given location"</span>,</span>
<span class="">          <span class="token string">"input_schema"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"object"</span>,</span>
<span class="">            <span class="token string">"properties"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">              <span class="token string">"location"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">                <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"string"</span>,</span>
<span class="">                <span class="token string">"description"</span><span class="token builtin class-name">:</span> <span class="token string">"The city and state, e.g. San Francisco, CA"</span></span>
<span class="">              <span class="token punctuation">}</span></span>
<span class="">            <span class="token punctuation">}</span>,</span>
<span class="">            <span class="token string">"required"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"location"</span><span class="token punctuation">]</span></span>
<span class="">          <span class="token punctuation">}</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">      <span class="token punctuation">]</span>,</span>
<span class="">      <span class="token string">"tool_choice"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"any"</span><span class="token punctuation">}</span>,</span>
<span class="">      <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">          <span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>,</span>
<span class="">          <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"What is the weather like in San Francisco?"</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">      <span class="token punctuation">]</span>,</span>
<span class="">      <span class="token string">"stream"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span></span>
<span class="">    <span class="token punctuation">}</span>'</span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Response</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-json"><span class="">event<span class="token operator">:</span> message_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_start"</span><span class="token punctuation">,</span><span class="token property">"message"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"msg_014p7gG3wDgGV9EUtLvnow3U"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message"</span><span class="token punctuation">,</span><span class="token property">"role"</span><span class="token operator">:</span><span class="token string">"assistant"</span><span class="token punctuation">,</span><span class="token property">"model"</span><span class="token operator">:</span><span class="token string">"claude-3-haiku-20240307"</span><span class="token punctuation">,</span><span class="token property">"stop_sequence"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span><span class="token property">"usage"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"input_tokens"</span><span class="token operator">:</span><span class="token number">472</span><span class="token punctuation">,</span><span class="token property">"output_tokens"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"stop_reason"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> ping</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ping"</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"Okay"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">","</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" let"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"'s"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" check"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" the"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" weather"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" for"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" San"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" Francisco"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">","</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" CA"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"tool_use"</span><span class="token punctuation">,</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"toolu_01T1x1fJ34qAmk2tNTrN7Up6"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"get_weather"</span><span class="token punctuation">,</span><span class="token property">"input"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"{\"location\":"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">" \"San"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">" Francisc"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"o,"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">" CA\""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">", "</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"\"unit\": \"fah"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"renheit\"}"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_delta"</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"stop_reason"</span><span class="token operator">:</span><span class="token string">"tool_use"</span><span class="token punctuation">,</span><span class="token property">"stop_sequence"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"usage"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"output_tokens"</span><span class="token operator">:</span><span class="token number">89</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_stop"</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="streaming-request-with-extended-thinking"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#streaming-request-with-extended-thinking">​</a></div><span class="cursor-pointer">Streaming request with extended thinking</span></h3>
<p>In this request, we enable extended thinking with streaming to see Claude’s step-by-step reasoning.</p>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Shell</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-bash language-bash"><code class="language-bash"><span class=""><span class="token function">curl</span> https://api.anthropic.com/v1/messages <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"x-api-key: <span class="token variable">$ANTHROPIC_API_KEY</span>"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"anthropic-version: 2023-06-01"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--header</span> <span class="token string">"content-type: application/json"</span> <span class="token punctuation">\</span></span>
<span class="">     <span class="token parameter variable">--data</span> <span class="token punctuation">\</span></span>
<span class="">'<span class="token punctuation">{</span></span>
<span class="">    <span class="token string">"model"</span><span class="token builtin class-name">:</span> <span class="token string">"claude-opus-4-20250514"</span>,</span>
<span class="">    <span class="token string">"max_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">20000</span>,</span>
<span class="">    <span class="token string">"stream"</span><span class="token builtin class-name">:</span> true,</span>
<span class="">    <span class="token string">"thinking"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="">        <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"enabled"</span>,</span>
<span class="">        <span class="token string">"budget_tokens"</span><span class="token builtin class-name">:</span> <span class="token number">16000</span></span>
<span class="">    <span class="token punctuation">}</span>,</span>
<span class="">    <span class="token string">"messages"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="">        <span class="token punctuation">{</span></span>
<span class="">            <span class="token string">"role"</span><span class="token builtin class-name">:</span> <span class="token string">"user"</span>,</span>
<span class="">            <span class="token string">"content"</span><span class="token builtin class-name">:</span> <span class="token string">"What is 27 * 453?"</span></span>
<span class="">        <span class="token punctuation">}</span></span>
<span class="">    <span class="token punctuation">]</span></span>
<span class=""><span class="token punctuation">}</span>'</span>
</code></pre></div></div></div>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Response</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-json"><span class="">event<span class="token operator">:</span> message_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_start"</span><span class="token punctuation">,</span> <span class="token property">"message"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"msg_01..."</span><span class="token punctuation">,</span> <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token property">"role"</span><span class="token operator">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">"model"</span><span class="token operator">:</span> <span class="token string">"claude-opus-4-20250514"</span><span class="token punctuation">,</span> <span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_start"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"content_block"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"Let me solve this step by step:\n\n1. First break down 27 * 453"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"\n2. 453 = 400 + 50 + 3"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"\n3. 27 * 400 = 10,800"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"\n4. 27 * 50 = 1,350"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"\n5. 27 * 3 = 81"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"thinking_delta"</span><span class="token punctuation">,</span> <span class="token property">"thinking"</span><span class="token operator">:</span> <span class="token string">"\n6. 10,800 + 1,350 + 81 = 12,231"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"signature_delta"</span><span class="token punctuation">,</span> <span class="token property">"signature"</span><span class="token operator">:</span> <span class="token string">"EqQBCgIYAhIM1gbcDa9GJwZA2b3hGgxBdjrkzLoky3dl1pkiMOYds..."</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_stop"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_start"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">"content_block"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_delta"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text_delta"</span><span class="token punctuation">,</span> <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"27 * 453 = 12,231"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"content_block_stop"</span><span class="token punctuation">,</span> <span class="token property">"index"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_delta"</span><span class="token punctuation">,</span> <span class="token property">"delta"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"stop_reason"</span><span class="token operator">:</span> <span class="token string">"end_turn"</span><span class="token punctuation">,</span> <span class="token property">"stop_sequence"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"message_stop"</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div>
<h3 class="flex whitespace-pre-wrap group font-semibold" id="streaming-request-with-web-search-tool-use"><div class="absolute"><a aria-label="Navigate to header" class="-ml-10 flex items-center opacity-0 border-0 group-hover:opacity-100" href="#streaming-request-with-web-search-tool-use">​</a></div><span class="cursor-pointer">Streaming request with web search tool use</span></h3>
<div class="code-block mt-5 mb-8 not-prose rounded-2xl relative group text-gray-50 bg-[#0F1117] dark:bg-codeblock ring-1 ring-transparent dark:ring-gray-800/50 codeblock-dark"><div class="flex rounded-t-2xl text-gray-400 text-xs leading-6 border-b font-medium bg-black/40 border-gray-900/80" data-component-part="code-block-tab-bar"><div class="flex-none border-b px-4 pt-2.5 pb-2 flex items-center text-primary-light border-primary-light" data-component-part="code-block-tab-bar-filename">Response</div></div><div class="min-w-full relative text-sm leading-6 children:!my-0 children:!shadow-none children:!bg-transparent transition-[height] duration-300 ease-in-out" data-component-part="code-block-root" style="font-variant-ligatures:none;height:auto"><div class="overflow-x-auto h-full p-5 [&amp;&gt;pre&gt;code]:pr-[3rem] [&amp;&gt;pre&gt;code&gt;span.line-highlight]:min-w-[calc(100%+3rem)] overflow-y-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-white/20 dark:scrollbar-thumb-white/20 hover:scrollbar-thumb-white/25 dark:hover:scrollbar-thumb-white/25 active:scrollbar-thumb-white/25 dark:active:scrollbar-thumb-white/25"><pre class="language-json"><code class="language-json"><span class="">event<span class="token operator">:</span> message_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_start"</span><span class="token punctuation">,</span><span class="token property">"message"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"msg_01G..."</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message"</span><span class="token punctuation">,</span><span class="token property">"role"</span><span class="token operator">:</span><span class="token string">"assistant"</span><span class="token punctuation">,</span><span class="token property">"model"</span><span class="token operator">:</span><span class="token string">"claude-3-7-sonnet-20250219"</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"stop_reason"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span><span class="token property">"stop_sequence"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">,</span><span class="token property">"usage"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"input_tokens"</span><span class="token operator">:</span><span class="token number">2679</span><span class="token punctuation">,</span><span class="token property">"cache_creation_input_tokens"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"cache_read_input_tokens"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"output_tokens"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"I'll check"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" the current weather in New York City for you"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> ping</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ping"</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"."</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"server_tool_use"</span><span class="token punctuation">,</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"srvtoolu_014hJH82Qum7Td6UV8gDXThB"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"web_search"</span><span class="token punctuation">,</span><span class="token property">"input"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"{\"query"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"\":"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">" \"weather"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">" NY"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"C to"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"input_json_delta"</span><span class="token punctuation">,</span><span class="token property">"partial_json"</span><span class="token operator">:</span><span class="token string">"day\"}"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"web_search_tool_result"</span><span class="token punctuation">,</span><span class="token property">"tool_use_id"</span><span class="token operator">:</span><span class="token string">"srvtoolu_014hJH82Qum7Td6UV8gDXThB"</span><span class="token punctuation">,</span><span class="token property">"content"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"web_search_result"</span><span class="token punctuation">,</span><span class="token property">"title"</span><span class="token operator">:</span><span class="token string">"Weather in New York City in May 2025 (New York) - detailed Weather Forecast for a month"</span><span class="token punctuation">,</span><span class="token property">"url"</span><span class="token operator">:</span><span class="token string">"https://world-weather.info/forecast/usa/new_york/may-2025/"</span><span class="token punctuation">,</span><span class="token property">"encrypted_content"</span><span class="token operator">:</span><span class="token string">"Ev0DCioIAxgCIiQ3NmU4ZmI4OC1k..."</span><span class="token punctuation">,</span><span class="token property">"page_age"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span>...<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_start</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_start"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"content_block"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"Here's the current weather information for New York"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" City:\n\n# Weather"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">" in New York City"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_delta"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"text_delta"</span><span class="token punctuation">,</span><span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"\n\n"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">...</span>
<!-- -->
<span class="">event<span class="token operator">:</span> content_block_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"content_block_stop"</span><span class="token punctuation">,</span><span class="token property">"index"</span><span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_delta</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_delta"</span><span class="token punctuation">,</span><span class="token property">"delta"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"stop_reason"</span><span class="token operator">:</span><span class="token string">"end_turn"</span><span class="token punctuation">,</span><span class="token property">"stop_sequence"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"usage"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"input_tokens"</span><span class="token operator">:</span><span class="token number">10682</span><span class="token punctuation">,</span><span class="token property">"cache_creation_input_tokens"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"cache_read_input_tokens"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"output_tokens"</span><span class="token operator">:</span><span class="token number">510</span><span class="token punctuation">,</span><span class="token property">"server_tool_use"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"web_search_requests"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<!-- -->
<span class="">event<span class="token operator">:</span> message_stop</span>
<span class="">data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"message_stop"</span><span class="token punctuation">}</span></span>
</code></pre></div></div></div></div><div class="leading-6 mt-14"><div class="feedback-toolbar pb-16 w-full"><div class="flex flex-col gap-y-4 xl:flex-col xl:gap-6 min-[1400px]:flex-row md:flex-row md:justify-end"><div class="flex flex-row gap-5 items-center grow justify-between md:justify-start xl:justify-between min-[1400px]:justify-start"><p class="text-sm text-gray-600 dark:text-gray-400">Was this page helpful?</p><div class="flex flex-row gap-3 items-center"><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">Yes</small></button><button class="px-3.5 py-2 flex flex-row gap-3 items-center border-standard rounded-xl text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 bg-white/50 dark:bg-codeblock/50 hover:border-gray-500 hover:dark:border-gray-500"><small class="text-sm font-normal leading-4">No</small></button></div></div></div></div><div class="mb-12 px-0.5 flex items-center text-sm font-semibold text-gray-700 dark:text-gray-200" id="pagination"><a class="flex items-center space-x-3 group" href="/en/docs/build-with-claude/extended-thinking"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Extended thinking</span></a><a class="flex items-center ml-auto space-x-3 group" href="/en/docs/build-with-claude/batch-processing"><span class="group-hover:text-gray-900 dark:group-hover:text-white">Batch processing</span></a></div></div></div><div class="hidden xl:flex self-start sticky xl:flex-col h-[calc(100vh-9.5rem)] top-[9.5rem]" id="content-side-layout"><div class="z-10 hidden xl:flex pl-10 box-border w-[19rem] max-h-full" id="table-of-contents-layout"><div class="text-gray-600 text-sm leading-6 w-[16.5rem] overflow-y-auto space-y-2 pb-4 -mt-10 pt-10" id="table-of-contents"><div class="text-gray-700 dark:text-gray-300 font-medium flex items-center space-x-2"><span>On this page</span></div></div></div></div></div></div></div></div></main>